const h=(e,c,a=[])=>{for(let t=1,l=e.length;t<l-1;t++){const s=e[t],{content:o,type:g}=s;if(g!=="text"||a.includes(o))continue;const r=c.find(({matcher:n})=>typeof n=="string"?n===o:n.test(o)),i=e[t-1],f=e[t+1];if(r&&i.tag===f.tag&&i.nesting===1&&f.nesting===-1){const n=r.replacer({tag:i.tag,content:s.content,attrs:Object.fromEntries(i.attrs||[])});n&&(i.tag=f.tag=n.tag,i.attrs=Object.entries(n.attrs),s.content=n.content),t+=2}}},p=(e,c={})=>{var a;((a=c.config)==null?void 0:a.length)!=0&&e.core.ruler.push("stylize_tag",({env:t,tokens:l})=>{var s;const o=((s=c.localConfigGetter)==null?void 0:s.call(c,t))??[];l.forEach(({type:g,children:r})=>{g==="inline"&&r&&h(r,[...o,...c.config??[]])})})};export{p as stylize};
//# sourceMappingURL=index.mjs.map
