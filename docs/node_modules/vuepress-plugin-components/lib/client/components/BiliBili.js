import{useEventListener as o}from"@vueuse/core";import{checkIsMobile as v}from"vuepress-shared/client";import{ref as h,computed as c,unref as p,onMounted as b,isRef as $,watch as w,defineComponent as N,h as g}from"vue";import"../styles/bili-bili.scss";const y=e=>typeof e=="string"?e:`${e}px`,B=(e,i=0)=>{const a=h(),l=c(()=>y(p(e.width)||"100%")),u=h("auto"),m=r=>{if(typeof r=="string"){const[n,d]=r.split(":"),f=Number(n)/Number(d);if(!Number.isNaN(f))return f}return typeof r=="number"?r:16/9},s=r=>{const n=p(e.height),d=m(p(e.ratio));return n?y(n):`${Number(r)/d+p(i)}px`},t=()=>{a.value&&(u.value=s(a.value.clientWidth))};return b(()=>{t(),$(i)&&w(i,()=>t()),o("orientationchange",()=>t()),o("resize",()=>t())}),{el:a,width:l,height:u}};var S=N({name:"BiliBili",props:{bvid:{type:String,required:!0},title:{type:String,default:"A BiliBili video"},page:{type:[String,Number],default:1},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:[String,Number],default:16/9},time:{type:[String,Number],default:0},lowQuality:Boolean,noDanmaku:Boolean},setup(e){const i=h(!1),a=c(()=>i.value?0:68),l=()=>{i.value=v(navigator.userAgent)||u.value.clientWidth<640},{el:u,width:m,height:s}=B(e,a),t=c(()=>`https://player.bilibili.com/player.html?bvid=${e.bvid}&t=${e.time}&high_quality=${e.lowQuality?0:1}&page=${e.page}&danmaku=${e.noDanmaku?0:1}`);return b(()=>{l(),o("orientationchange",()=>l()),o("resize",()=>l())}),()=>[g("div",{class:"bili-desc"},g("a",{class:"sr-only",href:t.value},e.title)),g("iframe",{ref:u,src:`https://player.bilibili.com/player.html?bvid=${e.bvid}&t=${e.time}&high_quality=${e.lowQuality?0:1}&page=${e.page}&danmaku=${e.noDanmaku?0:1}`,title:e.title,class:"bili-iframe",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; fullscreen; gyroscope; picture-in-picture",style:{width:m.value,height:s.value}})]}});export{S as default};
//# sourceMappingURL=BiliBili.js.map
