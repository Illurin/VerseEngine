import{usePageLang as m}from"@vuepress/client";import{ref as g,computed as n,unref as u,onMounted as v,isRef as w,watch as S,defineComponent as N,h as y}from"vue";import{useEventListener as h}from"@vueuse/core";import"../styles/youtube.scss";const b=t=>typeof t=="string"?t:`${t}px`,L=(t,i=0)=>{const a=g(),p=n(()=>b(u(t.width)||"100%")),o=g("auto"),s=e=>{if(typeof e=="string"){const[r,c]=e.split(":"),f=Number(r)/Number(c);if(!Number.isNaN(f))return f}return typeof e=="number"?e:16/9},d=e=>{const r=u(t.height),c=s(u(t.ratio));return r?b(r):`${Number(e)/c+u(i)}px`},l=()=>{a.value&&(o.value=d(a.value.clientWidth))};return v(()=>{l(),w(i)&&S(i,()=>l()),h("orientationchange",()=>l()),h("resize",()=>l())}),{el:a,width:p,height:o}};var $=N({name:"YouTube",props:{id:{type:String,default:""},title:{type:String,default:"A YouTube video"},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:[String,Number],default:16/9},autoplay:Boolean,loop:Boolean,showCc:Boolean,showAnnotations:Boolean,start:{type:[String,Number],default:void 0},end:{type:[String,Number],default:void 0},defaultCcLang:{type:String,default:""},uiLang:{type:String,default:""},listType:{type:String,default:""},list:{type:String,default:""},playlist:{type:String,default:""},disableControls:Boolean,disableFullscreen:Boolean,disableKeyboard:Boolean},setup(t){const i=m(),{el:a,width:p,height:o}=L(t),s=n(()=>t.id?`${t.id}?`:t.listType==="playlist"&&t.list?`?listType=playlist&list=${t.list.startsWith("PL")?t.list:`PL${t.list}`}&`:null),d=n(()=>{const e=new URLSearchParams;return t.autoplay&&e.set("autoplay","1"),t.loop&&e.set("loop","1"),t.showCc&&e.set("cc_load_policy","1"),t.showAnnotations&&e.set("iv_load_policy","3"),t.start&&e.set("start",t.start.toString()),t.end&&e.set("end",t.end.toString()),e.set("hl",t.uiLang||i.value),e.set("cc_lang_pref",t.defaultCcLang||i.value),e.set("color","white"),t.disableControls&&e.set("controls","0"),t.disableFullscreen&&e.set("fs","0"),t.disableKeyboard&&e.set("disablekb","1"),t.playlist&&e.set("playlist",t.playlist),e.toString()}),l=n(()=>s.value?`https://www.youtube.com/embed/${s.value}${d.value}`:null);return()=>l.value?[y("div",{class:"youtube-desc"},y("a",{class:"sr-only",href:l.value},t.title)),y("iframe",{ref:a,src:l.value,title:t.title,class:"youtube-iframe",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; fullscreen; gyroscope; picture-in-picture",style:{width:p.value,height:o.value}})]:null}});export{$ as default};
//# sourceMappingURL=YouTube.js.map
