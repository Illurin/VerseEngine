import{useSassPalettePlugin as O}from"vuepress-plugin-sass-palette";import{Logger as v,getLocales as y,mergeViteConfig as w}from"vuepress-shared/node";import{getDirname as C,path as j,colors as T}from"@vuepress/utils";import{ensureEndingSlash as B}from"@vuepress/shared";const $={"/en/":{backToTop:"Back to top"},"/zh/":{backToTop:"返回顶部"},"/zh-tw/":{backToTop:"返回頂部"},"/de-at/":{backToTop:"Zurück nach oben."},"/vi/":{backToTop:"Trở lại đầu trang"},"/uk/":{backToTop:"Повернутися до початку"},"/ru/":{backToTop:"Вернуться к началу"},"/br/":{backToTop:"Volta ao topo"},"/pl/":{backToTop:"Wróć na górę"},"/sk/":{backToTop:"Back to top"},"/fr/":{backToTop:"Back to top"},"/es/":{backToTop:"Volver arriba"},"/ja/":{backToTop:"このページのトップへ戻る"},"/tr/":{backToTop:"En başa dön"},"/ko/":{backToTop:"맨 위로"}},u=new v("vuepress-plugin-components"),P=C(import.meta.url),l=B(j.resolve(P,"../client")),S=(o="")=>o==="fontawesome"||o.match(/^(?:https:)?\/\/kit\.fontawesome\.com\//)?"fas fa-":o==="iconfont"||o.match(/^(?:https:)?\/\/at\.alicdn\.com\/t\//)?"iconfont icon-":"",m=({options:o,deprecatedOption:i,newOption:c,msg:t="",scope:p=""})=>{if(i in o){if(u.warn(`${T.magenta(i)} is ${T.yellow("deprecated")}${p?` in ${p}`:""}, please use "${T.magenta(c)}" instead.${t?`
${t}`:""}`),c.includes(".")){const a=c.split(".");let e=o;a.forEach((n,r)=>{r!==a.length-1?(e[n]=e[n]||{},e=e[n]):e[n]=o[i]})}else o[c]=o[i];delete o[i]}},I=o=>{m({options:o,deprecatedOption:"iconAssets",newOption:"componentOptions.fontIcon.assets"}),m({options:o,deprecatedOption:"iconPrefix",newOption:"componentOptions.fontIcon.prefix"}),m({options:o,deprecatedOption:"addThis",newOption:"rootComponents.addThis"}),m({options:o,deprecatedOption:"backToTop",newOption:"rootComponents.backToTop"}),m({options:o,deprecatedOption:"notice",newOption:"rootComponents.notice"}),m({options:o,deprecatedOption:"backToTopLocales",newOption:"locales.backToTop"})},L=["AudioPlayer","Badge","BiliBili","CodePen","FontIcon","PDF","StackBlitz","VideoPlayer","YouTube"],x=o=>{if(!o)return null;if(o==="fontawesome")return{type:"script",content:"https://kit.fontawesome.com/ca37c296c5.js"};if(o==="iconfont")return{type:"style",content:'@import url("//at.alicdn.com/t/font_2410206_a0xb9hku9iu.css");'};const i=o.match(/^(?:https?:)?\/\//g)?o:`//${o}`;return i.endsWith(".css")?{type:"style",content:`@import url("${o}");`}:i.endsWith(".js")?{type:"script",content:o}:(u.error(`Can not recognize icon link: "${o}"`),null)},_=(o,{components:i=[],componentOptions:c={},rootComponents:t={}})=>{let p="",a="",e="",n="",r=!1,d=!1,f=!1;return i.forEach(s=>{var g;if(L.includes(s)&&(p+=`import ${s} from "${l}components/${s}.js";
`,a+=`app.component("${s}", ${s});
`),s==="FontIcon"){const k=x((g=c.fontIcon)==null?void 0:g.assets);if(k){const{type:h,content:b}=k;h==="script"?(d=!0,e+=`useScriptTag(\`${b}\`);
`):(f=!0,e+=`useStyleTag(\`${b}\`, { id: "icon-assets" });
`)}}}),typeof t.addThis=="string"&&(d=!0,e+=`useScriptTag(\`//s7.addthis.com/js/300/addthis_widget.js#pubid=${t.addThis}\`);
`),t.backToTop&&(r=!0,p+=`import BackToTop from "${l}components/BackToTop.js";
`,n+=`() => h(BackToTop, { threshold: ${typeof t.backToTop=="number"?t.backToTop:300} }),
`),typeof t.notice=="object"&&(r=!0,p+=`import Notice from "${l}components/Notice.js";
`,n+=`() => h(Notice, ${JSON.stringify(t.notice)}),
`),o.writeTemp("components/config.js",`import { defineClientConfig } from "@vuepress/client";
${r?`import { h } from "vue";
`:""}
${d?`import { useScriptTag } from "${l}vueuse.js";
`:""}${f?`import { useStyleTag } from "${l}vueuse.js";
`:""}${p}

import "${l}styles/sr-only.scss";

export default defineClientConfig({
  enhance: ({ app }) => {
${a.split(`
`).map(s=>`    ${s}`).join(`
`)}
  },
  setup: () => {
${e.split(`
`).map(s=>`    ${s}`).join(`
`)}
  },
  rootComponents: [
${n.split(`
`).map(s=>`    ${s}`).join(`
`)}
  ],
});
`)},E=(o,i=!1)=>c=>(i&&I(o),c.env.isDebug&&u.info("Options:",o),O(c,{id:"hope"}),{name:"vuepress-plugin-components",define:()=>{var t,p,a,e;const{assets:n,prefix:r}=((t=o.componentOptions)==null?void 0:t.fontIcon)||{};return{BACK_TO_TOP_LOCALES:y({app:c,name:"backToTop",default:$,config:(p=o.locales)==null?void 0:p.backToTop}),ICON_PREFIX:typeof r=="string"?r:S(n),PDFJS_URL:((e=(a=o.componentOptions)==null?void 0:a.pdf)==null?void 0:e.pdfjs)||null}},extendsBundlerOptions:(t,p)=>{const{bundler:a}=p.options;if(a.name.endsWith("vite")){const e=t;e.viteOptions=w(e.viteOptions||{},{build:{rollupOptions:{onwarn(n,r){n.message.includes('is imported from external module "@vueuse/core" but never used in ')||r(n)}}}})}},clientConfigFile:t=>_(t,o)});export{$ as backToTopLocales,E as componentsPlugin};
//# sourceMappingURL=index.js.map
