{"version":3,"file":"index.js","sources":["../../src/node/markdown-it/chart.ts","../../src/node/markdown-it/codeDemo.ts","../../src/node/markdown-it/tabs.ts","../../src/node/markdown-it/codeTabs.ts","../../src/node/markdown-it/echarts.ts","../../src/node/markdown-it/flowchart.ts","../../src/node/markdown-it/hint.ts","../../src/node/markdown-it/mermaid.ts","../../src/node/markdown-it/utils.ts","../../src/node/markdown-it/playground/plugin.ts","../../src/node/markdown-it/playground/ventors/lzstring.ts","../../src/node/markdown-it/playground/ventors/optionDelcarations.ts","../../src/node/markdown-it/playground/ts.ts","../../src/node/markdown-it/playground/vue.ts","../../src/node/markdown-it/presentation.ts","../../src/node/markdown-it/vPre.ts","../../src/node/markdown-it/vuePlayground.ts","../../src/node/locales.ts","../../src/node/utils.ts","../../src/node/checkLink.ts","../../src/node/compact/utils.ts","../../src/node/compact/convert.ts","../../src/node/compact/codeDemo.ts","../../src/node/compact/codeGroup.ts","../../src/node/compact/flowchart.ts","../../src/node/prepare/config.ts","../../src/node/prepare/mathjax.ts","../../src/node/prepare/reveal.ts","../../src/node/plugin.ts"],"sourcesContent":["import { container } from \"@mdit/plugin-container\";\nimport { utoa } from \"vuepress-shared/node\";\n\nimport type { PluginSimple } from \"markdown-it\";\n\nexport const chart: PluginSimple = (md) => {\n  container(md, {\n    name: \"chart\",\n    openRender: (tokens, index) => {\n      const title = tokens[index].info\n        .trimStart()\n        // 'chart' length\n        .slice(5)\n        .trim();\n\n      const key = `chart-${index}`;\n\n      let config = \"{}\";\n      let configType = \"\";\n\n      for (let i = index; i < tokens.length; i++) {\n        const { type, content, info } = tokens[i];\n\n        if (type === \"container_chart_close\") break;\n\n        if (!content) continue;\n        if (type === \"fence\") {\n          if (info === \"json\") {\n            config = utoa(content);\n            configType = \"json\";\n          } else if (info === \"js\" || info === \"javascript\") {\n            config = utoa(content);\n            configType = \"js\";\n          }\n        }\n\n        // set to an unexist token type\n        tokens[i].type = \"chart_empty\";\n        // hide token\n        tokens[i].hidden = true;\n      }\n\n      return `<ChartJS id=\"${key}\" config=\"${config}\" ${\n        title ? `title=\"${encodeURIComponent(title)}\" ` : \"\"\n      }type=\"${configType}\">`;\n    },\n    closeRender: () => `</ChartJS>`,\n  });\n};\n","import { container } from \"@mdit/plugin-container\";\nimport { utoa } from \"vuepress-shared/node\";\n\nimport type { PluginSimple } from \"markdown-it\";\nimport type Token from \"markdown-it/lib/token.js\";\nimport type { CodeDemoOptions } from \"../../shared/index.js\";\n\nexport const CODE_DEMO_DEFAULT_SETTING: CodeDemoOptions = {\n  useBabel: false,\n  jsLib: [],\n  cssLib: [],\n  codepenLayout: \"left\",\n  codepenEditors: \"101\",\n  babel: \"https://unpkg.com/@babel/standalone/babel.min.js\",\n  vue: \"https://unpkg.com/vue/dist/vue.global.prod.js\",\n  react: \"https://unpkg.com/react/umd/react.production.min.js\",\n  reactDOM: \"https://unpkg.com/react-dom/umd/react-dom.production.min.js\",\n};\n\nconst getPlugin =\n  (name: string): PluginSimple =>\n  (md) =>\n    container(md, {\n      name,\n      openRender: (tokens: Token[], index: number): string => {\n        const title = tokens[index].info.trimStart().slice(name.length).trim();\n\n        let config = \"\";\n        const code: Record<string, string> = {};\n\n        for (let i = index; i < tokens.length; i++) {\n          const { type, content, info } = tokens[i];\n\n          if (type === `container_${name}_close`) break;\n          if (!content) continue;\n          if (type === \"fence\") {\n            if (info === \"json\") config = utoa(content);\n            else code[info] = content;\n          }\n        }\n\n        return `\n<CodeDemo id=\"code-demo-${index}\" type=\"${name.split(\"-\")[0]}\"${\n          title ? ` title=\"${encodeURIComponent(title)}\"` : \"\"\n        }${config ? ` config=\"${config}\"` : \"\"} code=\"${utoa(\n          JSON.stringify(code)\n        )}\">\n`;\n      },\n      closeRender: () => `</CodeDemo>`,\n    });\n\nexport const normalDemo: PluginSimple = getPlugin(\"normal-demo\");\n\nexport const vueDemo: PluginSimple = getPlugin(\"vue-demo\");\n\nexport const reactDemo: PluginSimple = getPlugin(\"react-demo\");\n","import type { Options, PluginWithOptions } from \"markdown-it\";\nimport type { RuleBlock } from \"markdown-it/lib/parser_block.js\";\nimport type Renderer from \"markdown-it/lib/renderer.js\";\nimport type Token from \"markdown-it/lib/token.js\";\n\ninterface BaseTabData {\n  title: string;\n  value?: string;\n}\n\nexport interface TabOptions {\n  name: string;\n  component: string;\n  getter: (\n    tokens: Token[],\n    index: number,\n    options: Options,\n    env: unknown,\n    self: Renderer\n  ) => Record<string, unknown>[];\n}\n\nexport const tabs: PluginWithOptions<TabOptions> = (\n  md,\n  { name, component, getter } = {\n    name: \"tabs\",\n    component: \"Tabs\",\n    getter: () => [],\n  }\n) => {\n  const CODETAB_MARKER = `@tab`;\n\n  const tabsRule: RuleBlock = (state, startLine, endLine, silent) => {\n    let start = state.bMarks[startLine] + state.tShift[startLine];\n    let max = state.eMarks[startLine];\n\n    // Check out the first character quickly,\n    // this should filter out most of non-containers\n    if (state.src[start] !== \":\") return false;\n\n    let pos = start + 1;\n\n    // Check out the rest of the marker string\n    while (pos <= max) {\n      if (state.src[pos] !== \":\") break;\n      pos += 1;\n    }\n\n    const markerCount = pos - start;\n\n    if (markerCount < 3) return false;\n\n    const markup = state.src.slice(start, pos);\n    const params = state.src.slice(pos, max);\n\n    const [containerName, id = \"\"] = params.split(\"#\", 2);\n\n    if (containerName.trim() !== name) return false;\n\n    // Since start is found, we can report success here in validation mode\n    if (silent) return true;\n\n    // Search for the end of the block\n    let nextLine = startLine;\n    let autoClosed = false;\n\n    // Search for the end of the block\n    while (\n      // unclosed block should be auto closed by end of document.\n      // also block seems to be auto closed by end of parent\n      nextLine < endLine\n    ) {\n      nextLine += 1;\n      start = state.bMarks[nextLine] + state.tShift[nextLine];\n      max = state.eMarks[nextLine];\n\n      if (start < max && state.sCount[nextLine] < state.blkIndent)\n        // non-empty line with negative indent should stop the list:\n        // - ```\n        //  test\n        break;\n\n      if (\n        // match start\n\n        state.src[start] === \":\" &&\n        // closing fence should be indented less than 4 spaces\n        state.sCount[nextLine] - state.blkIndent < 4\n      ) {\n        // check rest of marker\n        for (pos = start + 1; pos <= max; pos++)\n          if (state.src[pos] !== \":\") break;\n\n        // closing code fence must be at least as long as the opening one\n        if (pos - start >= markerCount) {\n          // make sure tail has spaces only\n          pos = state.skipSpaces(pos);\n\n          if (pos >= max) {\n            // found!\n            autoClosed = true;\n            break;\n          }\n        }\n      }\n    }\n\n    const oldParent = state.parentType;\n    const oldLineMax = state.lineMax;\n\n    // @ts-expect-error\n    state.parentType = `${name}_tabs`;\n\n    // this will prevent lazy continuations from ever going past our end marker\n    state.lineMax = nextLine - (autoClosed ? 1 : 0);\n\n    const openToken = state.push(`${name}_tabs_open`, component, 1);\n\n    openToken.markup = markup;\n    openToken.block = true;\n    openToken.info = containerName;\n    openToken.meta = { id: id.trim() };\n    openToken.map = [startLine, nextLine - (autoClosed ? 1 : 0)];\n\n    state.md.block.tokenize(\n      state,\n      startLine + 1,\n      nextLine - (autoClosed ? 1 : 0)\n    );\n\n    const closeToken = state.push(`${name}_tabs_close`, component, -1);\n\n    closeToken.markup = state.src.slice(start, pos);\n    closeToken.block = true;\n\n    state.parentType = oldParent;\n    state.lineMax = oldLineMax;\n    state.line = nextLine + (autoClosed ? 1 : 0);\n\n    return true;\n  };\n\n  const tabRule: RuleBlock = (state, startLine, endLine, silent) => {\n    let start = state.bMarks[startLine] + state.tShift[startLine];\n    let max = state.eMarks[startLine];\n\n    /*\n     * Check out the first character quickly,\n     * this should filter out most of non-uml blocks\n     */\n    if (state.src.charAt(start) !== \"@\") return false;\n\n    let index;\n\n    // Check out the rest of the marker string\n    for (index = 0; index < CODETAB_MARKER.length; index++)\n      if (CODETAB_MARKER[index] !== state.src[start + index]) return false;\n\n    const markup = state.src.slice(start, start + index);\n    const info = state.src.slice(start + index, max);\n\n    // Since start is found, we can report success here in validation mode\n    if (silent) return true;\n\n    let nextLine = startLine;\n    let autoClosed = false;\n\n    // Search for the end of the block\n    while (\n      // unclosed block should be auto closed by end of document.\n      // also block seems to be auto closed by end of parent\n      nextLine < endLine\n    ) {\n      nextLine += 1;\n      start = state.bMarks[nextLine] + state.tShift[nextLine];\n      max = state.eMarks[nextLine];\n\n      if (start < max && state.sCount[nextLine] < state.blkIndent)\n        // non-empty line with negative indent should stop the list:\n        // - ```\n        //  test\n        break;\n\n      if (\n        // match start\n        state.src[start] === \"@\" &&\n        // marker should not be indented with respect of opening fence\n        state.sCount[nextLine] <= state.sCount[startLine]\n      ) {\n        let openMakerMatched = true;\n\n        for (index = 0; index < CODETAB_MARKER.length; index++)\n          if (CODETAB_MARKER[index] !== state.src[start + index]) {\n            openMakerMatched = false;\n            break;\n          }\n\n        if (openMakerMatched) {\n          // found!\n          autoClosed = true;\n          nextLine -= 1;\n          break;\n        }\n      }\n    }\n\n    const oldParent = state.parentType;\n    const oldLineMax = state.lineMax;\n\n    // @ts-expect-error\n    state.parentType = `tab`;\n\n    // this will prevent lazy continuations from ever going past our end marker\n    state.lineMax = nextLine;\n\n    const openToken = state.push(\"tab_open\", \"template\", 1);\n\n    const [title, id] = info.replace(/^:active/, \"\").split(\"#\", 2);\n\n    openToken.block = true;\n    openToken.markup = markup;\n    openToken.info = title.trim();\n    openToken.meta = {\n      active: info.includes(\":active\"),\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    if (id) openToken.meta.value = id.trim();\n    openToken.map = [startLine, nextLine];\n\n    state.md.block.tokenize(state, startLine + 1, nextLine);\n\n    const closeToken = state.push(\"tab_close\", \"template\", -1);\n\n    closeToken.block = true;\n    closeToken.markup = \"\";\n\n    state.parentType = oldParent;\n    state.lineMax = oldLineMax;\n    state.line = nextLine + (autoClosed ? 1 : 0);\n\n    return true;\n  };\n\n  md.block.ruler.before(\"fence\", `${name}_tabs`, tabsRule, {\n    alt: [\"paragraph\", \"reference\", \"blockquote\", \"list\"],\n  });\n\n  // WARNING:  Here we use an internal variable to make sure tab rule is not registered\n\n  // @ts-ignore\n  // eslint-disable-next-line\n  if (!md.block.ruler.__rules__.find(({ name }) => name === \"tab\"))\n    md.block.ruler.before(\"fence\", \"tab\", tabRule, {\n      alt: [\"paragraph\", \"reference\", \"blockquote\", \"list\"],\n    });\n\n  md.renderer.rules[`${name}_tabs_open`] = (\n    tokens,\n    index,\n    options,\n    env,\n    self\n  ): string => {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    const { meta } = tokens[index];\n    const basicData: BaseTabData[] = [];\n    const customData = getter(tokens, index, options, env, self);\n    let activeIndex = -1;\n    let isTabStart = false;\n\n    for (let i = index; i < tokens.length; i++) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      const { block, meta, type, info } = tokens[i];\n\n      if (block) {\n        if (type === `${name}_tabs_close`) break;\n        if (type === `${name}_tabs_open`) continue;\n\n        if (type === \"tab_open\") {\n          // code tab is active\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n          if (meta.active) activeIndex = basicData.length;\n\n          tokens[i].attrPush([\n            `#tab${basicData.length}`,\n            \"{ title, value, isActive }\",\n          ]);\n\n          isTabStart = true;\n          basicData.push({\n            title: info,\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            ...(meta.value ? { value: meta.value as string } : {}),\n          });\n\n          continue;\n        }\n\n        if (type === \"tab_close\") continue;\n\n        if (!isTabStart) {\n          tokens[i].type = `${name}_tabs_empty`;\n          tokens[i].hidden = true;\n        }\n      }\n    }\n\n    const data = basicData.map((item, index) => ({\n      ...item,\n      ...customData[index],\n    }));\n\n    return `<${component} id=\"${index}\" :data='${\n      // single quote will break @vue/compiler-sfc\n      JSON.stringify(data).replace(/'/g, \"&#39\")\n    }'${activeIndex !== -1 ? ` :active=\"${activeIndex}\"` : \"\"}${\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      meta.id ? ` tab-id=\"${meta.id as string}\"` : \"\"\n    }>\\n`;\n  };\n\n  md.renderer.rules[`${name}_tabs_close`] = (): string => `</${component}>\\n`;\n};\n","import { tabs } from \"./tabs.js\";\n\nimport type { PluginSimple } from \"markdown-it\";\n\nexport const codeTabs: PluginSimple = (md) => {\n  tabs(md, {\n    name: \"code-tabs\",\n    component: \"CodeTabs\",\n    getter: (tokens, index) => {\n      let inCodeTab = false;\n      let foundFence = false;\n      const codeTabsData: { content: string }[] = [];\n\n      for (let i = index; i < tokens.length; i++) {\n        const { block, type } = tokens[i];\n\n        if (block) {\n          if (type === \"code-tabs_tabs_close\") {\n            break;\n          }\n\n          if (type === \"tab_close\") {\n            inCodeTab = false;\n            continue;\n          }\n\n          if (type === \"tab_open\") {\n            // found a code tab\n            inCodeTab = true;\n            foundFence = false;\n            continue;\n          }\n\n          if (inCodeTab && type === \"fence\" && !foundFence) {\n            foundFence = true;\n            continue;\n          }\n\n          tokens[i].type = \"code_tab_empty\";\n          tokens[i].hidden = true;\n        }\n      }\n\n      return codeTabsData;\n    },\n  });\n};\n","import { container } from \"@mdit/plugin-container\";\nimport { utoa } from \"vuepress-shared/node\";\nimport type Token from \"markdown-it/lib/token.js\";\n\nimport type { PluginSimple } from \"markdown-it\";\n\nconst echartsRender = (tokens: Token[], index: number): string => {\n  const token = tokens[index];\n  const key = `echarts-${index}`;\n  const { content, info } = token;\n  const title = info.trim().split(\":\", 2)[1];\n\n  return `<ECharts id=\"${key}\" config=\"${utoa(content)}\"${\n    title ? ` title=\"${encodeURIComponent(title)}\"` : \"\"\n  }></ECharts>`;\n};\n\nexport const echarts: PluginSimple = (md) => {\n  // Handle ```echarts blocks\n  const fence = md.renderer.rules.fence;\n\n  md.renderer.rules.fence = (...args): string => {\n    const [tokens, index] = args;\n    const { info } = tokens[index];\n    const realInfo = info.split(\":\", 2)[0];\n\n    if (realInfo === \"echarts\") return echartsRender(tokens, index);\n\n    return fence!(...args);\n  };\n\n  md.renderer.rules[\"echarts\"] = echartsRender;\n\n  container(md, {\n    name: \"echarts\",\n\n    openRender: (tokens, index) => {\n      const title = tokens[index].info\n        .trimStart()\n        // 'echarts' length\n        .slice(7)\n        .trim();\n\n      const key = `echarts-${index}`;\n\n      let config = \"{}\";\n      let isJavaScript = false;\n\n      for (let i = index; i < tokens.length; i++) {\n        const { type, content, info } = tokens[i];\n\n        if (type === \"container_echarts_close\") break;\n\n        if (!content) continue;\n        if (type === \"fence\") {\n          if (info === \"json\") config = content;\n          else if (info === \"js\" || info === \"javascript\") {\n            config = content;\n            isJavaScript = true;\n          }\n        }\n\n        // set to an unexist token type\n        tokens[i].type = \"echarts_empty\";\n        // hide token\n        tokens[i].hidden = true;\n      }\n\n      return `<ECharts id=\"${key}\" config=\"${utoa(config)}\"${\n        title ? ` title=\"${encodeURIComponent(title)}\"` : \"\"\n      }${isJavaScript ? ' type=\"js\"' : \"\"}>`;\n    },\n    closeRender: () => `</ECharts>`,\n  });\n};\n","import { utoa } from \"vuepress-shared/node\";\nimport type { PluginSimple } from \"markdown-it\";\nimport type Token from \"markdown-it/lib/token.js\";\n\nconst flowchartRender = (tokens: Token[], index: number): string => {\n  const token = tokens[index];\n  const key = `flowchart-${index}`;\n  const { content, info } = token;\n\n  return `<FlowChart id=\"${key}\" code=\"${utoa(content)}\" preset=\"${\n    info.trim().split(\":\", 2)[1] || \"vue\"\n  }\"></FlowChart>`;\n};\n\nexport const flowchart: PluginSimple = (md) => {\n  // Handle ```flow and ```flowchart blocks\n  const fence = md.renderer.rules.fence;\n\n  md.renderer.rules.fence = (...args): string => {\n    const [tokens, index] = args;\n    const { info } = tokens[index];\n    const realInfo = info.split(\":\", 2)[0];\n\n    if (realInfo === \"flow\" || realInfo === \"flowchart\")\n      return flowchartRender(tokens, index);\n\n    return fence!(...args);\n  };\n\n  md.renderer.rules[\"flowchart\"] = flowchartRender;\n};\n","import { container } from \"@mdit/plugin-container\";\nimport { ensureLeadingSlash, resolveLocalePath } from \"@vuepress/shared\";\n\nimport type { MarkdownEnv } from \"@vuepress/markdown\";\nimport type { PluginWithOptions } from \"markdown-it\";\nimport type { RequiredLocaleConfig } from \"vuepress-shared\";\nimport type { MarkdownHintLocaleData } from \"../typings/index.js\";\n\nexport type MarkdownItHintOptions =\n  RequiredLocaleConfig<MarkdownHintLocaleData>;\n\nexport type MarkdownHintBoxName = keyof MarkdownHintLocaleData;\n\nexport const hint: PluginWithOptions<MarkdownItHintOptions> = (\n  md,\n  options = {}\n) => {\n  const containers: MarkdownHintBoxName[] = [\n    \"info\",\n    \"note\",\n    \"tip\",\n    \"warning\",\n    \"danger\",\n  ];\n\n  containers.forEach((name) => {\n    md.use(container, {\n      name,\n      openRender: (tokens, index, _options, env: MarkdownEnv): string => {\n        const token = tokens[index];\n\n        // resolve info (title)\n        let info = token.info.trim().slice(name.length).trim();\n\n        // get locale\n        if (!info) {\n          const { filePathRelative } = env;\n          const relativePath = ensureLeadingSlash(filePathRelative ?? \"\");\n          const localePath = resolveLocalePath(options, relativePath);\n\n          info = options[localePath]?.[name];\n        }\n\n        return `<div class=\"hint-container ${name}\">\\n<p class=\"hint-container-title\">${\n          info || name\n        }</p>\\n`;\n      },\n      closeRender: () => \"</div>\\n\",\n    });\n  });\n\n  md.use((md) =>\n    container(md, {\n      name: \"details\",\n      openRender: (tokens, index, _options, env: MarkdownEnv): string => {\n        const token = tokens[index];\n\n        // resolve info (title)\n        let info = token.info\n          .trim()\n          .slice(\n            // length of \"details\"\n            7\n          )\n          .trim();\n\n        // get locale\n        if (!info) {\n          const { filePathRelative } = env;\n          const relativePath = ensureLeadingSlash(filePathRelative ?? \"\");\n          const localePath = resolveLocalePath(options, relativePath);\n\n          info = options[localePath]?.details;\n        }\n\n        return `<details class=\"hint-container details\"><summary>${\n          info || \"Details\"\n        }</summary>\\n`;\n      },\n      closeRender: () => \"</details>\\n\",\n    })\n  );\n};\n","import { utoa } from \"vuepress-shared/node\";\nimport type { PluginSimple } from \"markdown-it\";\nimport type Renderer from \"markdown-it/lib/renderer.js\";\n\nconst mermaidRender: Renderer.RenderRule = (tokens, index) => {\n  const token = tokens[index];\n  const key = `mermaid-${index}`;\n  const { content } = token;\n\n  return `<Mermaid id=\"${key}\" code=\"${utoa(content)}\"></Mermaid>`;\n};\n\n// a hack for sequenceDiagram\nconst mermaidHackRender = (\n  name: string,\n  content: string,\n  index: number\n): string =>\n  `<Mermaid id=\"mermaid-${index}\" code=\"${utoa(\n    `${name}\\n${content\n      .split(\"\\n\")\n      .map((line) => (line ? `  ${line}` : \"\"))\n      .join(\"\\n\")}`\n  )}\"></Mermaid>`;\n\nexport const mermaid: PluginSimple = (md) => {\n  // Handle ```mermaid blocks\n  const fence = md.renderer.rules.fence;\n\n  md.renderer.rules.fence = (...args): string => {\n    const [tokens, index] = args;\n    const { content, info } = tokens[index];\n\n    if (info.trim() === \"mermaid\") return mermaidRender(...args);\n    if (info.trim() === \"sequence\")\n      return mermaidHackRender(\"sequenceDiagram\", content, index);\n    if (info.trim() === \"class\")\n      return mermaidHackRender(\"classDiagram\", content, index);\n    if (info.trim() === \"state\")\n      return mermaidHackRender(\"stateDiagram-v2\", content, index);\n    if (info.trim() === \"er\")\n      return mermaidHackRender(\"erDiagram\", content, index);\n    if (info.trim() === \"journey\")\n      return mermaidHackRender(\"journey\", content, index);\n    if (info.trim() === \"gantt\")\n      return mermaidHackRender(\"gantt\", content, index);\n    if (info.trim() === \"pie\") return mermaidHackRender(\"pie\", content, index);\n    if (info.trim() === \"git-graph\")\n      return mermaidHackRender(\"gitGraph\", content, index);\n    if (info.trim() === \"c4c\")\n      return mermaidHackRender(\"C4Context\", content, index);\n    if (info.trim() === \"mindmap\")\n      return mermaidHackRender(\"mindmap\", content, index);\n\n    return fence!(...args);\n  };\n\n  md.renderer.rules[\"mermaid\"] = mermaidRender;\n};\n","// https://spec.commonmark.org/0.29/#line-ending\nexport const NEWLINES_RE = /\\r\\n?|\\n/g;\n\nexport const escapeHtml = (unsafeHTML: string): string =>\n  unsafeHTML\n    .replace(/&/gu, \"&amp;\")\n    .replace(/</gu, \"&lt;\")\n    .replace(/>/gu, \"&gt;\")\n    .replace(/\"/gu, \"&quot;\")\n    .replace(/'/gu, \"&#039;\");\n","import { hash } from \"@vuepress/utils\";\nimport { escapeHtml } from \"../utils.js\";\n\nimport type { PluginWithOptions } from \"markdown-it\";\nimport type { RuleBlock } from \"markdown-it/lib/parser_block.js\";\nimport type { PlaygroundData, PlaygroundOptions } from \"../../typings/index.js\";\n\nconst AT_MARKER = `@`;\nconst VALID_MARKERS = [\"file\", \"import\", \"setting\"];\n\nconst getPlaygroundRule =\n  (name: string): RuleBlock =>\n  (state, startLine, endLine, silent) => {\n    let start = state.bMarks[startLine] + state.tShift[startLine];\n    let max = state.eMarks[startLine];\n\n    // Check out the first character quickly,\n    // this should filter out most of non-containers\n    if (state.src[start] !== \":\") return false;\n\n    let pos = start + 1;\n\n    // Check out the rest of the marker string\n    while (pos <= max) {\n      if (state.src[pos] !== \":\") break;\n      pos += 1;\n    }\n\n    const markerCount = pos - start;\n\n    if (markerCount < 3) return false;\n\n    const markup = state.src.slice(start, pos);\n    const params = state.src.slice(pos, max);\n\n    const containerName = params.trimStart().split(\" \", 2)[0];\n\n    const title = params.trimStart().slice(name.length).trim();\n\n    if (containerName.trim() !== name) return false;\n\n    // Since start is found, we can report success here in validation mode\n    if (silent) return true;\n\n    // Search for the end of the block\n    let nextLine = startLine;\n    let autoClosed = false;\n\n    // Search for the end of the block\n    while (\n      // unclosed block should be auto closed by end of document.\n      // also block seems to be auto closed by end of parent\n      nextLine < endLine\n    ) {\n      nextLine += 1;\n      start = state.bMarks[nextLine] + state.tShift[nextLine];\n      max = state.eMarks[nextLine];\n\n      if (start < max && state.sCount[nextLine] < state.blkIndent)\n        // non-empty line with negative indent should stop the list:\n        // - ```\n        //  test\n        break;\n\n      if (\n        // match start\n\n        state.src[start] === \":\" &&\n        // closing fence should be indented less than 4 spaces\n        state.sCount[nextLine] - state.blkIndent < 4\n      ) {\n        // check rest of marker\n        for (pos = start + 1; pos <= max; pos++)\n          if (state.src[pos] !== \":\") break;\n\n        // closing code fence must be at least as long as the opening one\n        if (pos - start >= markerCount) {\n          // make sure tail has spaces only\n          pos = state.skipSpaces(pos);\n\n          if (pos >= max) {\n            // found!\n            autoClosed = true;\n            break;\n          }\n        }\n      }\n    }\n\n    const oldParent = state.parentType;\n    const oldLineMax = state.lineMax;\n\n    // @ts-expect-error\n    state.parentType = `${name}`;\n\n    // this will prevent lazy continuations from ever going past our end marker\n    state.lineMax = nextLine - (autoClosed ? 1 : 0);\n\n    const openToken = state.push(`${name}_open`, \"template\", 1);\n\n    openToken.markup = markup;\n    openToken.block = true;\n    openToken.info = title;\n    openToken.map = [startLine, nextLine - (autoClosed ? 1 : 0)];\n\n    state.md.block.tokenize(\n      state,\n      startLine + 1,\n      nextLine - (autoClosed ? 1 : 0)\n    );\n\n    const closeToken = state.push(`${name}_close`, \"template\", -1);\n\n    closeToken.markup = state.src.slice(start, pos);\n    closeToken.block = true;\n\n    state.parentType = oldParent;\n    state.lineMax = oldLineMax;\n    state.line = nextLine + (autoClosed ? 1 : 0);\n\n    return true;\n  };\n\nconst atMarkerRule =\n  (markerName: string): RuleBlock =>\n  (state, startLine, endLine, silent) => {\n    let start = state.bMarks[startLine] + state.tShift[startLine];\n    let max = state.eMarks[startLine];\n\n    const atMarker = `${AT_MARKER}${markerName}`;\n\n    /*\n     * Check out the first character quickly,\n     * this should filter out most of non-uml blocks\n     */\n    if (state.src.charAt(start) !== \"@\") return false;\n\n    let index;\n\n    // Check out the rest of the marker string\n    for (index = 0; index < atMarker.length; index++)\n      if (atMarker[index] !== state.src[start + index]) return false;\n\n    const markup = state.src.slice(start, start + index);\n    const info = state.src.slice(start + index, max);\n\n    // Since start is found, we can report success here in validation mode\n    if (silent) return true;\n\n    let nextLine = startLine;\n    let autoClosed = false;\n\n    // Search for the end of the block\n    while (\n      // unclosed block should be auto closed by end of document.\n      // also block seems to be auto closed by end of parent\n      nextLine < endLine\n    ) {\n      nextLine += 1;\n      start = state.bMarks[nextLine] + state.tShift[nextLine];\n      max = state.eMarks[nextLine];\n\n      if (start < max && state.sCount[nextLine] < state.blkIndent)\n        // non-empty line with negative indent should stop the list:\n        // - ```\n        //  test\n        break;\n\n      if (\n        // match start\n        state.src[start] === AT_MARKER &&\n        // marker should not be indented with respect of opening fence\n        state.sCount[nextLine] <= state.sCount[startLine]\n      ) {\n        let openMakerMatched = true;\n\n        for (index = 0; index < atMarker.length; index++)\n          if (atMarker[index] !== state.src[start + index]) {\n            openMakerMatched = false;\n            break;\n          }\n\n        if (openMakerMatched) {\n          // found!\n          autoClosed = true;\n          nextLine -= 1;\n          break;\n        }\n      }\n    }\n\n    const oldParent = state.parentType;\n    const oldLineMax = state.lineMax;\n\n    // @ts-expect-error\n    state.parentType = `${markerName}`;\n\n    // this will prevent lazy continuations from ever going past our end marker\n    state.lineMax = nextLine;\n\n    const openToken = state.push(`${markerName}_open`, \"template\", 1);\n\n    openToken.block = true;\n    openToken.markup = markup;\n    openToken.info = info.trim();\n\n    openToken.map = [startLine, nextLine];\n\n    state.md.block.tokenize(state, startLine + 1, nextLine);\n\n    const closeToken = state.push(`${markerName}_close`, \"template\", -1);\n\n    closeToken.block = true;\n    closeToken.markup = \"\";\n\n    state.parentType = oldParent;\n    state.lineMax = oldLineMax;\n    state.line = nextLine + (autoClosed ? 1 : 0);\n\n    return true;\n  };\n\nexport const playground: PluginWithOptions<PlaygroundOptions> = (\n  md,\n  { name = \"playground\", component = \"Playground\", propsGetter } = {\n    name: \"playground\",\n    component: \"Playground\",\n    propsGetter: (playgroundData: PlaygroundData): Record<string, string> => ({\n      key: playgroundData.key,\n      title: playgroundData.title || \"\",\n      files: encodeURIComponent(JSON.stringify(playgroundData.files)),\n      settings: encodeURIComponent(\n        JSON.stringify(playgroundData.settings || {})\n      ),\n    }),\n  }\n) => {\n  md.block.ruler.before(\"fence\", `${name}`, getPlaygroundRule(name), {\n    alt: [\"paragraph\", \"reference\", \"blockquote\", \"list\"],\n  });\n\n  VALID_MARKERS.forEach((marker) => {\n    // WARNING:  Here we use an internal variable to make sure tab rule is not registered\n\n    // @ts-ignore\n    // eslint-disable-next-line\n    if (!md.block.ruler.__rules__.find(({ name }) => name === \"marker\"))\n      md.block.ruler.before(\"fence\", \"tab\", atMarkerRule(marker), {\n        alt: [\"paragraph\", \"reference\", \"blockquote\", \"list\"],\n      });\n  });\n\n  md.renderer.rules[`${name}_open`] = (tokens, index): string => {\n    const { info } = tokens[index];\n\n    const playgroundData: PlaygroundData = {\n      key: hash(`playground${index}-${info}`),\n      title: encodeURIComponent(info),\n      settings: {},\n      files: {},\n    };\n\n    let currentKey: string | null = null;\n    let foundSettings = false;\n\n    for (let i = index; i < tokens.length; i++) {\n      const { block, type, info, content } = tokens[i];\n\n      if (block) {\n        if (type === `${name}_close`) break;\n        if (type === `${name}_open`) continue;\n\n        if (type === \"file_open\") {\n          // File rule must contain a valid file name\n          if (!info) continue;\n          currentKey = info;\n        } else if (type === \"import_open\")\n          playgroundData.importMap = currentKey = info || \"import-map.json\";\n\n        if (type === \"setting_open\") foundSettings = true;\n        if (type === \"setting_close\") foundSettings = false;\n\n        if (\n          type === \"file_close\" ||\n          type === \"import_close\" ||\n          type === \"setting_close\" ||\n          !content\n        ) {\n          tokens[i].type = `${name}_empty`;\n          tokens[i].hidden = true;\n          continue;\n        }\n\n        // parse settings\n        if (foundSettings) {\n          if (type === \"fence\" && info === \"json\")\n            playgroundData.settings = <Record<string, unknown>>(\n              JSON.parse(content.trim())\n            );\n        }\n        // add code block content\n        else if (type === \"fence\" && currentKey)\n          playgroundData.files[currentKey] = {\n            ext: info,\n            content: content,\n          };\n\n        tokens[i].type = `${name}_empty`;\n        tokens[i].hidden = true;\n      }\n    }\n\n    const props = propsGetter(playgroundData);\n\n    return `<${component} ${Object.entries(props)\n      .map(([attr, value]) => `${attr}=\"${escapeHtml(value)}\"`)\n      .join(\" \")}>\\n`;\n  };\n\n  md.renderer.rules[`${name}_close`] = (): string => `</${component}>\\n`;\n};\n","/* eslint-disable */\n/**\n * Edited from https://github.com/microsoft/TypeScript-Website/blob/v2/packages/sandbox/src/vendor/lzstring.min.js\n */\n\n// Original license reproduced below:\n\n// DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n//                     Version 2, December 2004\n//\n//  Copyright (C) 2004 Sam Hocevar <sam@hocevar.net>\n//\n//  Everyone is permitted to copy and distribute verbatim or modified\n//  copies of this license document, and changing it is allowed as long\n//  as the name is changed.\n//\n//             DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE\n//    TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n//\n//   0. You just DO WHAT THE FUCK YOU WANT TO.\n//\n\nconst e = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\n\nconst compress = (o: string, r: number, n: (pos: number) => string) => {\n  if (null == o) return \"\";\n\n  let e,\n    t,\n    i,\n    s = <Record<string, number>>{},\n    p = <Record<string, boolean>>{},\n    u = \"\",\n    c = \"\",\n    a = \"\",\n    l = 2,\n    f = 3,\n    h = 2,\n    d = [],\n    m = 0,\n    v = 0;\n\n  for (i = 0; i < o.length; i += 1)\n    if (\n      ((u = o.charAt(i)),\n      Object.prototype.hasOwnProperty.call(s, u) || ((s[u] = f++), (p[u] = !0)),\n      (c = a + u),\n      Object.prototype.hasOwnProperty.call(s, c))\n    )\n      a = c;\n    else {\n      if (Object.prototype.hasOwnProperty.call(p, a)) {\n        if (a.charCodeAt(0) < 256) {\n          for (e = 0; h > e; e++)\n            (m <<= 1), v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++;\n          for (t = a.charCodeAt(0), e = 0; 8 > e; e++)\n            (m = (m << 1) | (1 & t)),\n              v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n              (t >>= 1);\n        } else {\n          for (t = 1, e = 0; h > e; e++)\n            (m = (m << 1) | t),\n              v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n              (t = 0);\n          for (t = a.charCodeAt(0), e = 0; 16 > e; e++)\n            (m = (m << 1) | (1 & t)),\n              v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n              (t >>= 1);\n        }\n        l--, 0 == l && ((l = Math.pow(2, h)), h++), delete p[a];\n      } else\n        for (t = s[a], e = 0; h > e; e++)\n          (m = (m << 1) | (1 & t)),\n            v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n            (t >>= 1);\n      l--, 0 == l && ((l = Math.pow(2, h)), h++), (s[c] = f++), (a = String(u));\n    }\n\n  if (\"\" !== a) {\n    if (Object.prototype.hasOwnProperty.call(p, a)) {\n      if (a.charCodeAt(0) < 256) {\n        for (e = 0; h > e; e++)\n          (m <<= 1), v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++;\n        for (t = a.charCodeAt(0), e = 0; 8 > e; e++)\n          (m = (m << 1) | (1 & t)),\n            v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n            (t >>= 1);\n      } else {\n        for (t = 1, e = 0; h > e; e++)\n          (m = (m << 1) | t),\n            v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n            (t = 0);\n        for (t = a.charCodeAt(0), e = 0; 16 > e; e++)\n          (m = (m << 1) | (1 & t)),\n            v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n            (t >>= 1);\n      }\n      l--, 0 == l && ((l = Math.pow(2, h)), h++), delete p[a];\n    } else\n      for (t = s[a], e = 0; h > e; e++)\n        (m = (m << 1) | (1 & t)),\n          v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n          (t >>= 1);\n    l--, 0 == l && ((l = Math.pow(2, h)), h++);\n  }\n\n  for (t = 2, e = 0; h > e; e++)\n    (m = (m << 1) | (1 & t)),\n      v == r - 1 ? ((v = 0), d.push(n(m)), (m = 0)) : v++,\n      (t >>= 1);\n\n  for (;;) {\n    if (((m <<= 1), v == r - 1)) {\n      d.push(n(m));\n      break;\n    }\n    v++;\n  }\n\n  return d.join(\"\");\n};\n\nexport const compressToEncodedURIComponent = (content: string) =>\n  compress(content, 6, (pos: number) => e.charAt(pos));\n","/**\n * This file needs to be updated with typescript major and minor updates\n *\n * Generated from the following code:\n *\n\nJSON.stringify(\n  ts.optionDeclarations.map(({ name, type }) => ({\n    name,\n    type: type instanceof Map ? Object.fromEntries(type) : type,\n  }))\n)\n *\n */\n\nexport const optionDeclarations = [\n  { name: \"help\", type: \"boolean\" },\n  { name: \"help\", type: \"boolean\" },\n  { name: \"watch\", type: \"boolean\" },\n  { name: \"preserveWatchOutput\", type: \"boolean\" },\n  { name: \"listFiles\", type: \"boolean\" },\n  { name: \"explainFiles\", type: \"boolean\" },\n  { name: \"listEmittedFiles\", type: \"boolean\" },\n  { name: \"pretty\", type: \"boolean\" },\n  { name: \"traceResolution\", type: \"boolean\" },\n  { name: \"diagnostics\", type: \"boolean\" },\n  { name: \"extendedDiagnostics\", type: \"boolean\" },\n  { name: \"generateCpuProfile\", type: \"string\" },\n  { name: \"generateTrace\", type: \"string\" },\n  { name: \"incremental\", type: \"boolean\" },\n  { name: \"assumeChangesOnlyAffectDirectDependencies\", type: \"boolean\" },\n  { name: \"locale\", type: \"string\" },\n  { name: \"all\", type: \"boolean\" },\n  { name: \"version\", type: \"boolean\" },\n  { name: \"init\", type: \"boolean\" },\n  { name: \"project\", type: \"string\" },\n  { name: \"build\", type: \"boolean\" },\n  { name: \"showConfig\", type: \"boolean\" },\n  { name: \"listFilesOnly\", type: \"boolean\" },\n  {\n    name: \"target\",\n    type: {\n      es3: 0,\n      es5: 1,\n      es6: 2,\n      es2015: 2,\n      es2016: 3,\n      es2017: 4,\n      es2018: 5,\n      es2019: 6,\n      es2020: 7,\n      es2021: 8,\n      es2022: 9,\n      esnext: 99,\n    },\n  },\n  {\n    name: \"module\",\n    type: {\n      none: 0,\n      commonjs: 1,\n      amd: 2,\n      system: 4,\n      umd: 3,\n      es6: 5,\n      es2015: 5,\n      es2020: 6,\n      es2022: 7,\n      esnext: 99,\n      node16: 100,\n      nodenext: 199,\n    },\n  },\n  { name: \"lib\", type: \"list\" },\n  { name: \"allowJs\", type: \"boolean\" },\n  { name: \"checkJs\", type: \"boolean\" },\n  {\n    name: \"jsx\",\n    type: {\n      preserve: 1,\n      \"react-native\": 3,\n      react: 2,\n      \"react-jsx\": 4,\n      \"react-jsxdev\": 5,\n    },\n  },\n  { name: \"declaration\", type: \"boolean\" },\n  { name: \"declarationMap\", type: \"boolean\" },\n  { name: \"emitDeclarationOnly\", type: \"boolean\" },\n  { name: \"sourceMap\", type: \"boolean\" },\n  { name: \"outFile\", type: \"string\" },\n  { name: \"outDir\", type: \"string\" },\n  { name: \"rootDir\", type: \"string\" },\n  { name: \"composite\", type: \"boolean\" },\n  { name: \"tsBuildInfoFile\", type: \"string\" },\n  { name: \"removeComments\", type: \"boolean\" },\n  { name: \"noEmit\", type: \"boolean\" },\n  { name: \"importHelpers\", type: \"boolean\" },\n  {\n    name: \"importsNotUsedAsValues\",\n    type: { remove: 0, preserve: 1, error: 2 },\n  },\n  { name: \"downlevelIteration\", type: \"boolean\" },\n  { name: \"isolatedModules\", type: \"boolean\" },\n  { name: \"strict\", type: \"boolean\" },\n  { name: \"noImplicitAny\", type: \"boolean\" },\n  { name: \"strictNullChecks\", type: \"boolean\" },\n  { name: \"strictFunctionTypes\", type: \"boolean\" },\n  { name: \"strictBindCallApply\", type: \"boolean\" },\n  { name: \"strictPropertyInitialization\", type: \"boolean\" },\n  { name: \"noImplicitThis\", type: \"boolean\" },\n  { name: \"useUnknownInCatchVariables\", type: \"boolean\" },\n  { name: \"alwaysStrict\", type: \"boolean\" },\n  { name: \"noUnusedLocals\", type: \"boolean\" },\n  { name: \"noUnusedParameters\", type: \"boolean\" },\n  { name: \"exactOptionalPropertyTypes\", type: \"boolean\" },\n  { name: \"noImplicitReturns\", type: \"boolean\" },\n  { name: \"noFallthroughCasesInSwitch\", type: \"boolean\" },\n  { name: \"noUncheckedIndexedAccess\", type: \"boolean\" },\n  { name: \"noImplicitOverride\", type: \"boolean\" },\n  { name: \"noPropertyAccessFromIndexSignature\", type: \"boolean\" },\n  {\n    name: \"moduleResolution\",\n    type: { node: 2, classic: 1, node16: 3, nodenext: 99 },\n  },\n  { name: \"baseUrl\", type: \"string\" },\n  { name: \"paths\", type: \"object\" },\n  { name: \"rootDirs\", type: \"list\" },\n  { name: \"typeRoots\", type: \"list\" },\n  { name: \"types\", type: \"list\" },\n  { name: \"allowSyntheticDefaultImports\", type: \"boolean\" },\n  { name: \"esModuleInterop\", type: \"boolean\" },\n  { name: \"preserveSymlinks\", type: \"boolean\" },\n  { name: \"allowUmdGlobalAccess\", type: \"boolean\" },\n  { name: \"moduleSuffixes\", type: \"list\" },\n  { name: \"sourceRoot\", type: \"string\" },\n  { name: \"mapRoot\", type: \"string\" },\n  { name: \"inlineSourceMap\", type: \"boolean\" },\n  { name: \"inlineSources\", type: \"boolean\" },\n  { name: \"experimentalDecorators\", type: \"boolean\" },\n  { name: \"emitDecoratorMetadata\", type: \"boolean\" },\n  { name: \"jsxFactory\", type: \"string\" },\n  { name: \"jsxFragmentFactory\", type: \"string\" },\n  { name: \"jsxImportSource\", type: \"string\" },\n  { name: \"resolveJsonModule\", type: \"boolean\" },\n  { name: \"out\", type: \"string\" },\n  { name: \"reactNamespace\", type: \"string\" },\n  { name: \"skipDefaultLibCheck\", type: \"boolean\" },\n  { name: \"charset\", type: \"string\" },\n  { name: \"emitBOM\", type: \"boolean\" },\n  { name: \"newLine\", type: { crlf: 0, lf: 1 } },\n  { name: \"noErrorTruncation\", type: \"boolean\" },\n  { name: \"noLib\", type: \"boolean\" },\n  { name: \"noResolve\", type: \"boolean\" },\n  { name: \"stripInternal\", type: \"boolean\" },\n  { name: \"disableSizeLimit\", type: \"boolean\" },\n  { name: \"disableSourceOfProjectReferenceRedirect\", type: \"boolean\" },\n  { name: \"disableSolutionSearching\", type: \"boolean\" },\n  { name: \"disableReferencedProjectLoad\", type: \"boolean\" },\n  { name: \"noImplicitUseStrict\", type: \"boolean\" },\n  { name: \"noEmitHelpers\", type: \"boolean\" },\n  { name: \"noEmitOnError\", type: \"boolean\" },\n  { name: \"preserveConstEnums\", type: \"boolean\" },\n  { name: \"declarationDir\", type: \"string\" },\n  { name: \"skipLibCheck\", type: \"boolean\" },\n  { name: \"allowUnusedLabels\", type: \"boolean\" },\n  { name: \"allowUnreachableCode\", type: \"boolean\" },\n  { name: \"suppressExcessPropertyErrors\", type: \"boolean\" },\n  { name: \"suppressImplicitAnyIndexErrors\", type: \"boolean\" },\n  { name: \"forceConsistentCasingInFileNames\", type: \"boolean\" },\n  { name: \"maxNodeModuleJsDepth\", type: \"number\" },\n  { name: \"noStrictGenericChecks\", type: \"boolean\" },\n  { name: \"useDefineForClassFields\", type: \"boolean\" },\n  { name: \"preserveValueImports\", type: \"boolean\" },\n  { name: \"keyofStringsOnly\", type: \"boolean\" },\n  { name: \"plugins\", type: \"list\" },\n  { name: \"moduleDetection\", type: { auto: 2, legacy: 1, force: 3 } },\n];\n","import { deepMerge } from \"vuepress-shared/node\";\nimport { compressToEncodedURIComponent } from \"./ventors/lzstring.js\";\nimport { optionDeclarations } from \"./ventors/optionDelcarations.js\";\n\nimport type { CompilerOptions } from \"typescript\";\nimport type {\n  PlaygroundData,\n  PlaygroundOptions,\n  TSPresetPlaygroundOptions,\n} from \"../../typings/index.js\";\n\n/** Gets a query string representation (hash + queries) */\nexport const getURL = (\n  code: string,\n  compilerOptions: CompilerOptions = {}\n): string => {\n  const hash = `#code/${compressToEncodedURIComponent(code)}`;\n\n  const queryString = Object.entries(compilerOptions)\n    .map(([key, value]) => {\n      const item = optionDeclarations.find((option) => option.name === key)!;\n\n      if (!item || value === null || value === undefined) return \"\";\n\n      const { type } = item;\n\n      if (typeof type === \"object\") {\n        const result = type[value as keyof typeof type];\n\n        return result?.toString() || \"\";\n      }\n\n      return `${key}=${encodeURIComponent(value as string)}`;\n    })\n    .filter((value) => value.length)\n    .join(\"&\");\n\n  return `${queryString ? `?${queryString}` : \"\"}${hash}`;\n};\n\nexport const getTSPlaygroundPreset = ({\n  service = \"https://www.typescriptlang.org/play\",\n  ...compilerOptions\n}: TSPresetPlaygroundOptions = {}): PlaygroundOptions => ({\n  name: \"playground#ts\",\n  propsGetter: ({\n    title = \"\",\n    files,\n    settings,\n    key,\n  }: PlaygroundData): Record<string, string> => {\n    const tsfiles = Object.keys(files).filter((key) => key.endsWith(\".ts\"));\n\n    if (tsfiles.length !== 1)\n      console.error(\"TS playground only support 1 ts file\");\n\n    const link = `${service}${getURL(\n      files[tsfiles[0]].content,\n      deepMerge(\n        {},\n        <CompilerOptions>settings || {},\n        <CompilerOptions>compilerOptions\n      )\n    )}`;\n\n    return {\n      key,\n      title,\n      link: encodeURIComponent(link),\n    };\n  },\n});\n","import { deepMerge } from \"vuepress-shared/node\";\nimport type {\n  PlaygroundData,\n  PlaygroundOptions,\n  VuePresetPlaygroundOptions,\n} from \"../../typings/index.js\";\n\nconst VUE_SUPPORTED_EXTENSIONS = [\n  \"html\",\n  \"js\",\n  \"ts\",\n  \"vue\",\n  \"jsx\",\n  \"tsx\",\n  \"json\",\n];\n\nconst DEFAULT_VUE_CDN = \"https://sfc.vuejs.org/vue.runtime.esm-browser.js\";\nconst DEFAULT_VUE_SR_CDN =\n  \"https://sfc.vuejs.org/server-renderer.esm-browser.js\";\n\nexport const getVuePlaygroundPreset = (\n  options: VuePresetPlaygroundOptions = {}\n): PlaygroundOptions => ({\n  name: \"playground#vue\",\n  propsGetter: (playgroundData: PlaygroundData): Record<string, string> => {\n    const { title = \"\", files, settings: localSettings, key } = playgroundData;\n    const settings = {\n      // defaults\n      service: \"https://sfc.vuejs.org/\",\n      dev: false,\n      ssr: false,\n      ...options,\n      ...localSettings,\n    };\n\n    const fileInfo = Object.fromEntries(\n      Object.entries(files)\n        .filter(([, { ext }]) => VUE_SUPPORTED_EXTENSIONS.includes(ext))\n        .map(([key, { content }]) => {\n          if (key === \"import-map.json\") {\n            const importMap = <\n              {\n                imports: Record<string, string>;\n                scopes?: Record<string, Record<string, string>>;\n              }\n            >JSON.parse(content);\n\n            return [\n              key,\n              JSON.stringify(\n                deepMerge(\n                  {\n                    imports: {\n                      // insure vue exists\n                      vue: DEFAULT_VUE_CDN,\n                      // insure vue/server-renderer exists\n                      ...(settings.ssr\n                        ? {\n                            // eslint-disable-next-line @typescript-eslint/naming-convention\n                            \"vue/server-renderer\": DEFAULT_VUE_SR_CDN,\n                          }\n                        : {}),\n                    },\n                  },\n                  importMap\n                )\n              ),\n            ];\n          }\n\n          return [key, content];\n        })\n    );\n\n    if (settings.ssr && !fileInfo[\"import-map.json\"])\n      fileInfo[\"import-map.json\"] = JSON.stringify(\n        {\n          imports: {\n            vue: DEFAULT_VUE_CDN,\n            // eslint-disable-next-line @typescript-eslint/naming-convention\n            \"vue/server-renderer\": DEFAULT_VUE_SR_CDN,\n          },\n        },\n        null,\n        2\n      );\n\n    return {\n      key,\n      title,\n      link: encodeURIComponent(\n        `${settings.service}#${\n          // dev flag\n          settings.dev ? \"__DEV__\" : \"\"\n        }${\n          // ssr flag\n          settings.ssr ? \"__SSR__\" : \"\"\n        }${\n          // code base64\n          Buffer.from(JSON.stringify(fileInfo)).toString(\"base64\")\n        }`\n      ),\n    };\n  },\n});\n","import { uml } from \"@mdit/plugin-uml\";\nimport { utoa } from \"vuepress-shared/node\";\n\nimport type { PluginSimple } from \"markdown-it\";\n\nexport const presentation: PluginSimple = (md) => {\n  md.use(uml, {\n    name: \"presentation\",\n    open: \"slidestart\",\n    close: \"slideend\",\n    render: (tokens, index): string => {\n      const token = tokens[index];\n      const key = `presentation-${index}`;\n      const { content, info } = token;\n\n      return `<Presentation id=\"${key}\" code=\"${utoa(content)}\" theme=\"${\n        info.trim() || \"auto\"\n      }\"></Presentation>`;\n    },\n  });\n};\n","import { container } from \"@mdit/plugin-container\";\n\nimport type { PluginSimple } from \"markdown-it\";\n\nexport const vPre: PluginSimple = (md) => {\n  container(md, {\n    name: \"v-pre\",\n    openRender: () => `<div v-pre>\\n`,\n    closeRender: () => \"</div>\\n\",\n  });\n};\n","import { playground } from \"./playground/index.js\";\n\nimport type { PluginSimple } from \"markdown-it\";\nimport type { PlaygroundData } from \"../typings/index.js\";\nimport type { VuePlaygroundOptions } from \"../../shared/index.js\";\n\nexport const DEFAULT_VUE_PLAYGROUND_OPTIONS: VuePlaygroundOptions = {\n  autoResize: true,\n  showCode: false,\n  showCompileOutput: false,\n  showImportMap: true,\n  clearConsole: false,\n  layout: \"vertical\",\n  ssr: false,\n};\nconst VUE_SUPPORTED_EXTENSIONS = [\n  \"html\",\n  \"js\",\n  \"ts\",\n  \"vue\",\n  \"jsx\",\n  \"tsx\",\n  \"json\",\n];\n\nconst encodeFiles = (files: PlaygroundData[\"files\"]): string =>\n  Buffer.from(\n    JSON.stringify(\n      Object.fromEntries(\n        Object.entries(files)\n          .filter(([, { ext }]) => VUE_SUPPORTED_EXTENSIONS.includes(ext))\n          .map(([key, config]) => [key, config.content])\n      )\n    )\n  ).toString(\"base64\");\n\nexport const vuePlayground: PluginSimple = (md) => {\n  md.use(playground, {\n    name: \"vue-playground\",\n    component: \"VuePlayground\",\n    propsGetter: ({ title = \"\", key, files, settings }: PlaygroundData) => ({\n      title,\n      key,\n      settings: encodeURIComponent(JSON.stringify(settings || {})),\n      files: encodeURIComponent(encodeFiles(files)),\n    }),\n  });\n};\n","import type { MarkdownEnhanceLocaleConfig } from \"./typings/index.js\";\n\nexport const markdownEnhanceLocales: MarkdownEnhanceLocaleConfig = {\n  \"/en/\": {\n    info: \"Info\",\n    note: \"Note\",\n    tip: \"Tips\",\n    warning: \"Note\",\n    danger: \"Warning\",\n    details: \"Details\",\n  },\n\n  \"/zh/\": {\n    info: \"相关信息\",\n    note: \"注\",\n    tip: \"提示\",\n    warning: \"注意\",\n    danger: \"警告\",\n    details: \"详情\",\n  },\n\n  \"/zh-tw/\": {\n    info: \"相關信息\",\n    note: \"注\",\n    tip: \"提示\",\n    warning: \"注意\",\n    danger: \"警告\",\n    details: \"詳情\",\n  },\n\n  \"/de-at/\": {\n    info: \"Information\",\n    note: \"Note\",\n    tip: \"Tips\",\n    warning: \"Notiz\",\n    danger: \"Warnung\",\n    details: \"Details\",\n  },\n\n  \"/vi/\": {\n    info: \"Thông tin\",\n    note: \"Note\",\n    tip: \"Tips\",\n    warning: \"Lưu ý\",\n    danger: \"Cẩn thận\",\n    details: \"Chi tiết\",\n  },\n\n  \"/uk/\": {\n    info: \"Інформація\",\n    note: \"Note\",\n    tip: \"Поради\",\n    warning: \"Примітка\",\n    danger: \"Увага\",\n    details: \"Деталь\",\n  },\n\n  \"/ru/\": {\n    info: \"Инфо\",\n    note: \"Заметка\",\n    tip: \"Совет\",\n    warning: \"Примечание\",\n    danger: \"Предупреждение\",\n    details: \"Подробности\",\n  },\n\n  \"/br/\": {\n    info: \"Informativo\",\n    note: \"Note\",\n    tip: \"Dicas\",\n    warning: \"Avisos\",\n    danger: \"Cuidado\",\n    details: \"Detalhe\",\n  },\n\n  \"/pl/\": {\n    info: \"Info\",\n    note: \"Notatka\",\n    tip: \"Porady\",\n    warning: \"Notatka\",\n    danger: \"Ostrzeżenie\",\n    details: \"Dane\",\n  },\n\n  \"/sk/\": {\n    info: \"Info\",\n    note: \"Poznámka\",\n    tip: \"Tip\",\n    warning: \"Upozornenie\",\n    danger: \"Pozor\",\n    details: \"Podrobnosti\",\n  },\n\n  \"/fr/\": {\n    info: \"Info\",\n    note: \"Note\",\n    tip: \"Conseil\",\n    warning: \"Note\",\n    danger: \"Avertissement\",\n    details: \"Details\",\n  },\n\n  \"/es/\": {\n    info: \"Información\",\n    note: \"Nota\",\n    tip: \"Consejos\",\n    warning: \"Aviso\",\n    danger: \"Advertencia\",\n    details: \"Detalles\",\n  },\n\n  \"/ja/\": {\n    info: \"関連情報\",\n    note: \"注\",\n    tip: \"ヒント\",\n    warning: \"注意\",\n    danger: \"警告\",\n    details: \"詳細\",\n  },\n\n  \"/tr/\": {\n    info: \"Bilgi\",\n    note: \"Not\",\n    tip: \"Tavsiye\",\n    warning: \"Uyarı\",\n    danger: \"Tehlike\",\n    details: \"Detay\",\n  },\n\n  \"/ko/\": {\n    info: \"정보\",\n    note: \"노트\",\n    tip: \"팁\",\n    warning: \"경고\",\n    danger: \"위험\",\n    details: \"세부사항\",\n  },\n};\n","import { Logger } from \"vuepress-shared/node\";\nimport { ensureEndingSlash } from \"@vuepress/shared\";\nimport { getDirname, path } from \"@vuepress/utils\";\n\nconst __dirname = getDirname(import.meta.url);\n\nexport const MATHML_TAGS = [\n  \"math\",\n  \"maction\",\n  \"maligngroup\",\n  \"malignmark\",\n  \"menclose\",\n  \"merror\",\n  \"mfenced\",\n  \"mfrac\",\n  \"mglyph\",\n  \"mi\",\n  \"mlabeledtr\",\n  \"mlongdiv\",\n  \"mmutiscripts\",\n  \"mn\",\n  \"mo\",\n  \"mover\",\n  \"mpadded\",\n  \"mphantom\",\n  \"mroot\",\n  \"mrow\",\n  \"ms\",\n  \"mscarries\",\n  \"mscarry\",\n  \"msgroup\",\n  \"msline\",\n  \"mspace\",\n  \"msqrt\",\n  \"msrow\",\n  \"mstack\",\n  \"mstyle\",\n  \"msub\",\n  \"msup\",\n  \"msubsup\",\n  \"mtable\",\n  \"mtd\",\n  \"mtext\",\n  \"mtr\",\n  \"munder\",\n  \"munderover\",\n  \"semantics\",\n  \"annotation\",\n  \"annotation-xml\",\n];\n\nexport const logger = new Logger(\"vuepress-plugin-md-enhance\");\n\nexport const CLIENT_FOLDER = ensureEndingSlash(\n  path.resolve(__dirname, \"../client\")\n);\n","import { logger } from \"@vuepress/utils\";\n\nimport type { App, Page } from \"@vuepress/core\";\nimport type { MarkdownEnhanceOptions } from \"./options.js\";\n\nexport const getCheckLinksStatus = (\n  app: App,\n  options: Partial<MarkdownEnhanceOptions>\n): boolean => {\n  const { linkCheck = \"dev\" } = options;\n\n  return typeof linkCheck === \"boolean\"\n    ? linkCheck\n    : // always check\n      linkCheck === \"always\" ||\n        // enable in dev\n        (app.env.isDev && linkCheck === \"dev\") ||\n        // enabled in build\n        (app.env.isBuild && linkCheck === \"build\") ||\n        false;\n};\n\nexport const checkLinks = (page: Page, app: App): void => {\n  const path = page.filePathRelative || page.path;\n  const { pages } = app;\n\n  const markdownLinks = page.links.filter(({ raw }) =>\n    raw.match(/.md((?:\\?|#).*)?$/)\n  );\n\n  const brokenLinks = [\n    ...markdownLinks\n      // relative markdown links\n      .filter(({ raw }) => !raw.startsWith(\"/\"))\n      .filter(({ relative }) =>\n        // check whether the page exists\n        pages.every(\n          ({ filePathRelative }) => filePathRelative !== decodeURI(relative)\n        )\n      ),\n    ...markdownLinks\n      // absolute markdown links\n      .filter(({ raw }) => raw.startsWith(\"/\"))\n      .filter(({ absolute }) =>\n        // check whether the page exists\n        pages.every(\n          ({ filePathRelative }) =>\n            !filePathRelative ||\n            `${app.options.base}${filePathRelative}` !== decodeURI(absolute)\n        )\n      ),\n  ].map(({ raw }) => raw);\n\n  if (brokenLinks.length)\n    logger.warn(`Broken links found in ${path}: ${brokenLinks.join(\", \")}`);\n};\n","import { colors } from \"@vuepress/utils\";\nimport { logger } from \"../utils.js\";\n\nexport interface DeprecatedLoggerOptions {\n  options: Record<string, unknown>;\n  deprecatedOption: string;\n  newOption: string;\n  msg?: string;\n  scope?: string;\n}\n\nexport const deprecatedLogger = ({\n  options,\n  deprecatedOption,\n  newOption,\n  msg = \"\",\n  scope = \"\",\n}: DeprecatedLoggerOptions): void => {\n  if (deprecatedOption in options) {\n    logger.warn(\n      `${colors.magenta(deprecatedOption)} is ${colors.yellow(\"deprecated\")}${\n        scope ? ` in ${scope}` : \"\"\n      }, please use \"${colors.magenta(newOption)}\" instead.${\n        msg ? `\\n${msg}` : \"\"\n      }`\n    );\n\n    if (newOption.includes(\".\")) {\n      const keys = newOption.split(\".\");\n      let temp = options;\n\n      keys.forEach((key, index) => {\n        if (index !== keys.length - 1) {\n          // ensure level exists\n          temp[key] = temp[key] || {};\n\n          temp = temp[key] as Record<string, unknown>;\n        } else temp[key] = options[deprecatedOption];\n      });\n    } else options[newOption] = options[deprecatedOption];\n\n    delete options[deprecatedOption];\n  }\n};\n\nexport const droppedLogger = (\n  options: Record<string, unknown>,\n  droppedOption: string,\n  hint = \"\",\n  newOption = \"\"\n): void => {\n  if (droppedOption in options) {\n    logger.error(\n      `\"${colors.magenta(droppedOption)}\" is ${colors.red(\"removed\")}${\n        newOption\n          ? `, please use ${colors.magenta(newOption)} instead.`\n          : \" and no longer supported\"\n      }${hint ? `\\n${hint}` : \"\"}`\n    );\n\n    if (!newOption) delete options[droppedOption];\n  }\n};\n","import { deprecatedLogger, droppedLogger } from \"./utils.js\";\nimport type { MarkdownEnhanceOptions } from \"../options.js\";\n\n/** @deprecated */\nexport const convertOptions = (\n  options: MarkdownEnhanceOptions & Record<string, unknown>\n): void => {\n  deprecatedLogger({\n    options,\n    deprecatedOption: \"codegroup\",\n    newOption: \"codetabs\",\n  });\n  deprecatedLogger({\n    options,\n    deprecatedOption: \"lazyload\",\n    newOption: \"imgLazyload\",\n  });\n  deprecatedLogger({\n    options,\n    deprecatedOption: \"imageLazyload\",\n    newOption: \"imgLazyload\",\n  });\n  deprecatedLogger({\n    options,\n    deprecatedOption: \"imageMark\",\n    newOption: \"imgMark\",\n  });\n  deprecatedLogger({\n    options,\n    deprecatedOption: \"imageSize\",\n    newOption: \"imgSize\",\n  });\n  deprecatedLogger({\n    options,\n    deprecatedOption: \"mdImport\",\n    newOption: \"include\",\n  });\n  deprecatedLogger({\n    options,\n    deprecatedOption: \"tex\",\n    newOption: \"katex\",\n  });\n  deprecatedLogger({\n    options,\n    deprecatedOption: \"vpre\",\n    newOption: \"vPre\",\n  });\n  deprecatedLogger({\n    options,\n    deprecatedOption: \"imageTitle\",\n    newOption: \"figure\",\n  });\n  droppedLogger(options, \"enableAll\");\n  droppedLogger(options, \"lineNumbers\");\n  droppedLogger(options, \"imageFix\");\n};\n","import { container } from \"@mdit/plugin-container\";\nimport { utoa } from \"vuepress-shared/node\";\n\nimport type { PluginSimple } from \"markdown-it\";\nimport type Token from \"markdown-it/lib/token.js\";\n\n/** @deprecated */\nexport const legacyCodeDemo: PluginSimple = (md) => {\n  md.use(container, {\n    name: \"demo\",\n    openRender: (tokens: Token[], index: number): string => {\n      const { info } = tokens[index];\n      const type = /\\[(.*)\\]/u.exec(info);\n      const title = /^ demo\\s*(?:\\[.*?\\])?\\s*(.*)\\s*$/u.exec(info);\n\n      let config = \"\";\n      const code: Record<string, string> = {};\n\n      for (let i = index; i < tokens.length; i++) {\n        const { type, content, info } = tokens[i];\n\n        if (type === `container_demo_close`) break;\n        if (!content) continue;\n        if (type === \"fence\") {\n          if (info === \"json\") config = utoa(content);\n          else code[info] = content;\n        }\n      }\n\n      return `\n<CodeDemo id=\"code-demo-${index}\" type=\"${type?.[1] || \"normal\"}\"${\n        title ? ` title=\"${encodeURIComponent(title[1])}\"` : \"\"\n      }${config ? ` config=\"${config}\"` : \"\"} code=\"${utoa(\n        JSON.stringify(code)\n      )}\">\n`;\n    },\n    closeRender: () => `</CodeDemo>`,\n  });\n};\n","import { container } from \"@mdit/plugin-container\";\nimport { logger } from \"../utils.js\";\n\nimport type { MarkdownEnv } from \"@vuepress/markdown\";\nimport type { PluginSimple } from \"markdown-it\";\n\n/** @deprecated */\nexport const legacyCodeGroup: PluginSimple = (md) => {\n  md.use(container, {\n    name: \"code-group\",\n    openRender: (_tokens, _index, _options, env: MarkdownEnv) => {\n      logger.warn(\n        `Deprecated code-group syntax found${\n          env.filePathRelative ? `in ${env.filePathRelative}` : \"\"\n        }`\n      );\n\n      return `<CodeGroup>\\n`;\n    },\n    closeRender: () => \"</CodeGroup>\\n\",\n  });\n\n  md.use(container, {\n    name: \"code-group-item\",\n    openRender: (tokens, index) => {\n      const { info } = tokens[index];\n      const isActive = info.split(\":\").pop() === \"active\";\n\n      return `<CodeGroupItem title=\"${\n        isActive ? info.replace(/:active$/, \"\") : info\n      }\"${isActive ? \" active\" : \"\"}>\\n`;\n    },\n    closeRender: () => \"</CodeGroupItem>\\n\",\n  });\n};\n","import { uml } from \"@mdit/plugin-uml\";\nimport { utoa } from \"vuepress-shared/node\";\n\nimport type { PluginSimple } from \"markdown-it\";\n\n/** @deprecated */\nexport const legacyFlowchart: PluginSimple = (md) => {\n  uml(md, {\n    name: \"flowchart\",\n    open: \"flowstart\",\n    close: \"flowend\",\n    render: (tokens, index): string => {\n      console.warn(\n        '\"@flowstart ... @flowend\" is deprecated, you should use ```flow ... ``` instead.'\n      );\n\n      const token = tokens[index];\n      const key = `flowchart-${index}`;\n      const { content, info } = token;\n\n      return `<FlowChart id=\"${key}\" code=\"${utoa(content)}\" preset=\"${\n        info.trim() || \"vue\"\n      }\"></FlowChart>`;\n    },\n  });\n};\n","import { CLIENT_FOLDER } from \"../utils.js\";\n\nimport type { App } from \"@vuepress/core\";\nimport type { MarkdownEnhanceOptions } from \"../options.js\";\n\nexport const prepareConfigFile = async (\n  app: App,\n  options: MarkdownEnhanceOptions,\n  legacy = false\n): Promise<string> => {\n  let configImport = \"\";\n  let enhance = \"\";\n\n  const getStatus = (key: keyof MarkdownEnhanceOptions, gfm = false): boolean =>\n    key in options\n      ? Boolean(options[key])\n      : (gfm && \"gfm\" in options && options.gfm) || false;\n\n  if (getStatus(\"chart\")) {\n    configImport += `\\\nimport ChartJS from \"${CLIENT_FOLDER}components/ChartJS.js\";\n`;\n    enhance += `\\\napp.component(\"ChartJS\", ChartJS);\n`;\n  }\n\n  if (getStatus(\"codetabs\")) {\n    configImport += `\\\nimport CodeTabs from \"${CLIENT_FOLDER}components/CodeTabs.js\";\n`;\n    enhance += `\\\napp.component(\"CodeTabs\", CodeTabs);\n`;\n\n    // TODO: Remove this in v2 stable\n    if (legacy) {\n      configImport += `\\\nimport { CodeGroup, CodeGroupItem } from \"${CLIENT_FOLDER}compact/index.js\";\n`;\n      enhance += `\\\napp.component(\"CodeGroup\", CodeGroup);\napp.component(\"CodeGroupItem\", CodeGroupItem);\n`;\n    }\n  }\n\n  if (getStatus(\"container\"))\n    configImport += `\\\nimport \"${CLIENT_FOLDER}styles/container/index.scss\";\n`;\n\n  if (getStatus(\"demo\")) {\n    configImport += `\\\nimport CodeDemo from \"${CLIENT_FOLDER}components/CodeDemo.js\";\n`;\n    enhance += `\\\napp.component(\"CodeDemo\", CodeDemo);\n`;\n  }\n\n  if (getStatus(\"echarts\")) {\n    configImport += `\\\nimport ECharts from \"${CLIENT_FOLDER}components/ECharts.js\";\n`;\n    enhance += `\\\napp.component(\"ECharts\", ECharts);\n`;\n  }\n\n  if (getStatus(\"figure\", true))\n    configImport += `\\\nimport \"${CLIENT_FOLDER}styles/figure.scss\";\n`;\n\n  if (getStatus(\"flowchart\")) {\n    configImport += `\\\nimport FlowChart from \"${CLIENT_FOLDER}components/FlowChart.js\";\n`;\n    enhance += `\\\napp.component(\"FlowChart\", FlowChart);\n`;\n  }\n\n  if (getStatus(\"footnote\", true))\n    configImport += `\\\nimport \"${CLIENT_FOLDER}styles/footnote.scss\";\n`;\n\n  if (getStatus(\"imgMark\", true))\n    configImport += `\\\nimport \"${CLIENT_FOLDER}styles/image-mark.scss\";\n`;\n\n  if (getStatus(\"mermaid\")) {\n    configImport += `\\\nimport Mermaid from \"${CLIENT_FOLDER}components/Mermaid.js\";\n`;\n    enhance += `\\\napp.component(\"Mermaid\", Mermaid);\n`;\n  }\n\n  if (getStatus(\"presentation\")) {\n    configImport += `\\\nimport Presentation from \"${CLIENT_FOLDER}components/Presentation.js\";\n`;\n    enhance += `\\\napp.component(\"Presentation\", Presentation);\n`;\n  }\n\n  if (getStatus(\"playground\")) {\n    configImport += `\\\nimport Playground from \"${CLIENT_FOLDER}components/Playground.js\";\n`;\n    enhance += `\\\napp.component(\"Playground\", Playground);\n`;\n  }\n\n  if (getStatus(\"tabs\")) {\n    configImport += `\\\nimport Tabs from \"${CLIENT_FOLDER}components/Tabs.js\";\n`;\n    enhance += `\\\napp.component(\"Tabs\", Tabs);\n`;\n  }\n\n  if (getStatus(\"tasklist\", true))\n    configImport += `\\\nimport \"${CLIENT_FOLDER}styles/tasklist.scss\";\n`;\n\n  if (getStatus(\"katex\"))\n    configImport += `\\\nimport \"${CLIENT_FOLDER}styles/katex.scss\";\n`;\n\n  if (getStatus(\"vuePlayground\")) {\n    configImport += `\\\nimport { defineAsyncComponent } from \"vue\";\n`;\n    enhance += `\\\napp.component(\"VuePlayground\", defineAsyncComponent(() => import(\"${CLIENT_FOLDER}components/VuePlayground.js\")));\n    `;\n  }\n\n  if (getStatus(\"mathjax\"))\n    configImport += `\\\nimport \"./mathjax.css\";\n`;\n\n  return app.writeTemp(\n    `md-enhance/config.js`,\n    `\\\nimport { defineClientConfig } from \"@vuepress/client\";\n${configImport}\n\nexport default defineClientConfig({\n  enhance: ({ app }) => {\n${enhance\n  .split(\"\\n\")\n  .map((item) => `    ${item}`)\n  .join(\"\\n\")}\n  },\n});\n`\n  );\n};\n","import { generateMathjaxStyle } from \"@mdit/plugin-mathjax\";\n\nimport type { App } from \"@vuepress/core\";\nimport type { MathjaxInstance } from \"@mdit/plugin-mathjax\";\n\nexport const prepareMathjaxStyleFile = async (\n  app: App,\n  mathjaxInstance: MathjaxInstance\n): Promise<void> => {\n  await app.writeTemp(\n    \"md-enhance/mathjax.css\",\n    generateMathjaxStyle(mathjaxInstance)\n  );\n};\n","import { CLIENT_FOLDER } from \"../utils.js\";\n\nimport type { App } from \"@vuepress/core\";\nimport type { RevealPlugin } from \"../typings/index.js\";\n\nexport const prepareRevealPluginFile = async (\n  app: App,\n  revealPlugins: RevealPlugin[]\n): Promise<void> => {\n  const packages = [\n    \"reveal\",\n    \"revealMarkdown\",\n    ...revealPlugins.map(\n      (key) => `reveal${key[0].toUpperCase()}${key.substring(1)}`\n    ),\n  ];\n\n  await app.writeTemp(\n    \"md-enhance/reveal.js\",\n    `\\\nimport { ${packages.join(\", \")} } from \"${CLIENT_FOLDER}reveal/index.js\";\n\nexport const useReveal = () => [${packages\n      .map((name) => `${name}()`)\n      .join(\", \")}];\n`\n  );\n};\n","import { align } from \"@mdit/plugin-align\";\nimport { attrs } from \"@mdit/plugin-attrs\";\nimport { figure } from \"@mdit/plugin-figure\";\nimport { footnote } from \"@mdit/plugin-footnote\";\nimport { imgLazyload } from \"@mdit/plugin-img-lazyload\";\nimport { imgMark } from \"@mdit/plugin-img-mark\";\nimport { imgSize } from \"@mdit/plugin-img-size\";\nimport { include } from \"@mdit/plugin-include\";\nimport { katex } from \"@mdit/plugin-katex\";\nimport { createMathjaxInstance, mathjax } from \"@mdit/plugin-mathjax\";\nimport { mark } from \"@mdit/plugin-mark\";\nimport { stylize } from \"@mdit/plugin-stylize\";\nimport { sub } from \"@mdit/plugin-sub\";\nimport { sup } from \"@mdit/plugin-sup\";\nimport { tasklist } from \"@mdit/plugin-tasklist\";\nimport { useSassPalettePlugin } from \"vuepress-plugin-sass-palette\";\nimport {\n  addCustomElement,\n  addViteOptimizeDepsExclude,\n  addViteOptimizeDepsInclude,\n  addViteSsrExternal,\n  addViteSsrNoExternal,\n  chainWebpack,\n  deepMerge,\n  getLocales,\n  mergeViteConfig,\n} from \"vuepress-shared/node\";\n\nimport { logger } from \"./utils.js\";\n\nimport { checkLinks, getCheckLinksStatus } from \"./checkLink.js\";\nimport {\n  convertOptions,\n  legacyCodeDemo,\n  legacyCodeGroup,\n  legacyFlowchart,\n} from \"./compact/index.js\";\nimport { markdownEnhanceLocales } from \"./locales.js\";\nimport {\n  CODE_DEMO_DEFAULT_SETTING,\n  DEFAULT_VUE_PLAYGROUND_OPTIONS,\n  chart,\n  codeTabs,\n  echarts,\n  flowchart,\n  hint,\n  mermaid,\n  normalDemo,\n  playground,\n  presentation,\n  reactDemo,\n  tabs,\n  vPre,\n  vueDemo,\n  vuePlayground,\n  getVuePlaygroundPreset,\n  getTSPlaygroundPreset,\n} from \"./markdown-it/index.js\";\nimport {\n  prepareConfigFile,\n  prepareMathjaxStyleFile,\n  prepareRevealPluginFile,\n} from \"./prepare/index.js\";\nimport { MATHML_TAGS } from \"./utils.js\";\n\nimport type { PluginFunction } from \"@vuepress/core\";\nimport type { MarkdownEnv } from \"@vuepress/markdown\";\nimport type { ViteBundlerOptions } from \"@vuepress/bundler-vite\";\nimport type { RollupWarning } from \"rollup\";\nimport type { MarkdownEnhanceOptions } from \"./options.js\";\nimport type { KatexOptions } from \"./typings/index.js\";\n\nexport const mdEnhancePlugin =\n  (\n    options: MarkdownEnhanceOptions = { gfm: true },\n    legacy = false\n  ): PluginFunction =>\n  (app) => {\n    // TODO: Remove this in v2 stable\n    if (legacy)\n      convertOptions(\n        options as MarkdownEnhanceOptions & Record<string, unknown>\n      );\n    if (app.env.isDebug) logger.info(\"Options:\", options);\n\n    const getStatus = (\n      key: keyof MarkdownEnhanceOptions,\n      gfm = false\n    ): boolean =>\n      key in options\n        ? Boolean(options[key])\n        : (gfm && \"gfm\" in options && options.gfm) || false;\n\n    const locales = getLocales({\n      app,\n      name: \"md-enhance\",\n      default: markdownEnhanceLocales,\n      config: options.locales,\n    });\n\n    const chartEnable = getStatus(\"chart\");\n    const echartsEnable = getStatus(\"echarts\");\n    const flowchartEnable = getStatus(\"flowchart\");\n    const footnoteEnable = getStatus(\"footnote\", true);\n    const imgMarkEnable = getStatus(\"imgMark\", true);\n    const tasklistEnable = getStatus(\"tasklist\", true);\n    const mermaidEnable = getStatus(\"mermaid\");\n    const presentationEnable = getStatus(\"presentation\");\n    const katexEnable = getStatus(\"katex\");\n    const mathjaxEnable = getStatus(\"mathjax\");\n    const vuePlaygroundEnable = getStatus(\"vuePlayground\");\n\n    const shouldCheckLinks = getCheckLinksStatus(app, options);\n\n    const katexOptions: KatexOptions = {\n      macros: {\n        // support more symbols\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        \"\\\\liiiint\": \"\\\\int\\\\!\\\\!\\\\!\\\\iiint\",\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        \"\\\\iiiint\": \"\\\\int\\\\!\\\\!\\\\!\\\\!\\\\iiint\",\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        \"\\\\idotsint\": \"\\\\int\\\\!\\\\cdots\\\\!\\\\int\",\n      },\n      ...(typeof options.katex === \"object\" ? options.katex : {}),\n    };\n\n    const mathjaxInstance =\n      options.mathjax === false\n        ? null\n        : createMathjaxInstance(\n            typeof options.mathjax === \"object\" ? options.mathjax : {}\n          );\n\n    const revealPlugins =\n      typeof options.presentation === \"object\" &&\n      Array.isArray(options.presentation.plugins)\n        ? options.presentation.plugins\n        : [];\n\n    useSassPalettePlugin(app, { id: \"hope\" });\n\n    let isAppInitialized = false;\n\n    return {\n      name: \"vuepress-plugin-md-enhance\",\n\n      define: (): Record<string, unknown> => ({\n        MARKDOWN_ENHANCE_DELAY: options.delay || 500,\n        CODE_DEMO_OPTIONS: {\n          ...CODE_DEMO_DEFAULT_SETTING,\n          ...(typeof options.demo === \"object\" ? options.demo : {}),\n        },\n        MERMAID_OPTIONS:\n          typeof options.mermaid === \"object\" ? options.mermaid : {},\n        REVEAL_CONFIG:\n          typeof options.presentation === \"object\" &&\n          typeof options.presentation.revealConfig === \"object\"\n            ? options.presentation.revealConfig\n            : {},\n        VUE_PLAYGROUND_OPTIONS:\n          typeof options.vuePlayground === \"object\"\n            ? deepMerge(\n                {},\n                DEFAULT_VUE_PLAYGROUND_OPTIONS,\n                options.vuePlayground\n              )\n            : DEFAULT_VUE_PLAYGROUND_OPTIONS,\n      }),\n\n      extendsBundlerOptions: (config: unknown, app): void => {\n        const { bundler } = app.options;\n\n        if (bundler.name.endsWith(\"vite\")) {\n          const bundlerConfig = <ViteBundlerOptions>config;\n\n          bundlerConfig.viteOptions = mergeViteConfig(\n            bundlerConfig.viteOptions || {},\n            {\n              build: {\n                rollupOptions: {\n                  onwarn(\n                    warning: RollupWarning,\n                    warn: (warning: RollupWarning) => void\n                  ) {\n                    if (warning.message.includes(\"Use of eval\")) return;\n\n                    warn(warning);\n                  },\n                },\n              },\n            }\n          );\n        }\n\n        addViteSsrNoExternal({ app, config }, [\"fflate\", \"vuepress-shared\"]);\n\n        if (katexEnable && katexOptions.output !== \"html\")\n          addCustomElement({ app, config }, MATHML_TAGS);\n        else if (mathjaxEnable) {\n          addCustomElement({ app, config }, /^mjx-/);\n          if (mathjaxInstance?.documentOptions.enableAssistiveMml)\n            addCustomElement({ app, config }, MATHML_TAGS);\n        }\n        if (chartEnable) {\n          addViteOptimizeDepsExclude({ app, config }, \"chart.js/auto/auto.mjs\");\n          addViteSsrExternal({ app, config }, \"chart.js\");\n        }\n\n        if (echartsEnable) {\n          addViteOptimizeDepsExclude({ app, config }, \"echarts\");\n          addViteSsrExternal({ app, config }, \"echarts\");\n        }\n\n        if (flowchartEnable) {\n          addViteOptimizeDepsInclude(\n            { app, config },\n            \"flowchart.js/src/flowchart.parse.js\"\n          );\n          addViteSsrExternal({ app, config }, \"flowchart.js\");\n        }\n\n        if (mermaidEnable) {\n          addViteOptimizeDepsExclude({ app, config }, \"mermaid\");\n          addViteSsrExternal({ app, config }, \"mermaid\");\n        }\n\n        if (presentationEnable) {\n          addViteOptimizeDepsExclude({ app, config }, [\n            \"reveal.js/dist/reveal.esm.js\",\n            \"reveal.js/plugin/markdown/markdown.esm.js\",\n            ...revealPlugins.map(\n              (plugin) => `reveal.js/plugin/${plugin}/${plugin}.esm.js`\n            ),\n          ]);\n\n          addViteSsrExternal({ app, config }, \"reveal.js\");\n        }\n\n        if (vuePlaygroundEnable) {\n          addViteOptimizeDepsInclude({ app, config }, \"@vue/repl\");\n          addViteSsrExternal({ app, config }, \"@vue/repl\");\n\n          // hide webpack warnings\n          chainWebpack({ app, config }, (config) => {\n            config.module.set(\"exprContextCritical\", false);\n            config.module.set(\"unknownContextCritical\", false);\n          });\n        }\n      },\n\n      extendsMarkdown: (md): void => {\n        // syntax\n        if (getStatus(\"gfm\")) md.options.linkify = true;\n        if (getStatus(\"attrs\"))\n          md.use(attrs, typeof options.attrs === \"object\" ? options.attrs : {});\n        if (getStatus(\"align\")) md.use(align);\n        if (getStatus(\"container\")) md.use(hint, locales);\n        if (getStatus(\"imgLazyload\")) md.use(imgLazyload);\n        if (getStatus(\"figure\")) md.use(figure);\n        if (imgMarkEnable)\n          md.use(\n            imgMark,\n            typeof options.imgMark === \"object\" ? options.imgMark : {}\n          );\n        if (getStatus(\"imgSize\")) md.use(imgSize);\n        if (getStatus(\"sup\")) md.use(sup);\n        if (getStatus(\"sub\")) md.use(sub);\n        if (footnoteEnable) md.use(footnote);\n        if (getStatus(\"mark\")) md.use(mark);\n        if (tasklistEnable)\n          md.use(tasklist, [\n            typeof options.tasklist === \"object\" ? options.tasklist : {},\n          ]);\n\n        // additional functions\n        if (\n          getStatus(\"vPre\") ||\n          // TODO: Remove this in v2 stable\n          legacy\n        )\n          md.use(vPre);\n        if (katexEnable) md.use(katex, katexOptions);\n        else if (mathjaxEnable) md.use(mathjax, mathjaxInstance!);\n\n        if (getStatus(\"include\"))\n          md.use(include, {\n            getCurrentPath: (env: MarkdownEnv) => env.filePath,\n            ...(typeof options.include === \"object\" ? options.include : {}),\n          });\n        if (getStatus(\"stylize\"))\n          md.use(stylize, {\n            config: options.stylize,\n            localConfigGetter: (env: MarkdownEnv) =>\n              env.frontmatter?.[\"stylize\"] || null,\n          });\n\n        // features\n        if (getStatus(\"codetabs\")) {\n          md.use(codeTabs);\n          // TODO: Remove this in v2 stable\n          if (legacy) md.use(legacyCodeGroup);\n        }\n        if (getStatus(\"tabs\")) md.use(tabs);\n        if (flowchartEnable) {\n          md.use(flowchart);\n          // TODO: Remove this in v2 stable\n          if (legacy) md.use(legacyFlowchart);\n        }\n        if (chartEnable) md.use(chart);\n        if (echartsEnable) md.use(echarts);\n        if (getStatus(\"demo\")) {\n          md.use(normalDemo);\n          md.use(vueDemo);\n          md.use(reactDemo);\n          // TODO: Remove this in v2 stable\n          if (legacy) md.use(legacyCodeDemo);\n        }\n        if (mermaidEnable) md.use(mermaid);\n        if (presentationEnable) md.use(presentation);\n        if (typeof options.playground === \"object\") {\n          const { presets = [], config = {} } = options.playground;\n\n          presets.forEach((preset) => {\n            if (preset === \"ts\")\n              md.use(playground, getTSPlaygroundPreset(config.ts || {}));\n            else if (preset === \"vue\")\n              md.use(playground, getVuePlaygroundPreset(config.vue || {}));\n            else if (typeof preset === \"object\") md.use(playground, preset);\n          });\n        }\n        if (vuePlaygroundEnable) md.use(vuePlayground);\n      },\n\n      extendsPage: (page, app): void => {\n        if (shouldCheckLinks && isAppInitialized) checkLinks(page, app);\n      },\n\n      onInitialized: (app): void => {\n        isAppInitialized = true;\n        if (shouldCheckLinks)\n          app.pages.forEach((page) => checkLinks(page, app));\n      },\n\n      onPrepared: async (app): Promise<void> =>\n        Promise.all([\n          mathjaxEnable\n            ? prepareMathjaxStyleFile(app, mathjaxInstance!)\n            : Promise.resolve(),\n          prepareRevealPluginFile(app, revealPlugins),\n        ]).then(() => void 0),\n\n      clientConfigFile: (app) => prepareConfigFile(app, options, legacy),\n    };\n  };\n"],"names":["chart","md","container","tokens","index","title","key","config","configType","i","type","content","info","utoa","CODE_DEMO_DEFAULT_SETTING","getPlugin","name","code","normalDemo","vueDemo","reactDemo","tabs","component","getter","CODETAB_MARKER","tabsRule","state","startLine","endLine","silent","start","max","pos","markerCount","markup","params","containerName","id","nextLine","autoClosed","oldParent","oldLineMax","openToken","closeToken","tabRule","openMakerMatched","options","env","self","meta","basicData","customData","activeIndex","isTabStart","block","data","item","codeTabs","inCodeTab","foundFence","codeTabsData","echartsRender","token","echarts","fence","args","isJavaScript","flowchartRender","flowchart","realInfo","hint","_options","_a","filePathRelative","relativePath","ensureLeadingSlash","localePath","resolveLocalePath","mermaidRender","mermaidHackRender","line","mermaid","escapeHtml","unsafeHTML","AT_MARKER","VALID_MARKERS","getPlaygroundRule","atMarkerRule","markerName","atMarker","playground","propsGetter","playgroundData","marker","hash","currentKey","foundSettings","props","attr","value","e","compress","o","r","n","t","s","p","u","c","a","l","f","h","d","m","v","compressToEncodedURIComponent","optionDeclarations","getURL","compilerOptions","queryString","option","result","getTSPlaygroundPreset","service","files","settings","tsfiles","link","deepMerge","VUE_SUPPORTED_EXTENSIONS","DEFAULT_VUE_CDN","DEFAULT_VUE_SR_CDN","getVuePlaygroundPreset","localSettings","fileInfo","ext","importMap","presentation","uml","vPre","DEFAULT_VUE_PLAYGROUND_OPTIONS","encodeFiles","vuePlayground","markdownEnhanceLocales","__dirname","getDirname","MATHML_TAGS","logger","Logger","CLIENT_FOLDER","ensureEndingSlash","path","getCheckLinksStatus","app","linkCheck","checkLinks","page","pages","markdownLinks","raw","brokenLinks","relative","absolute","deprecatedLogger","deprecatedOption","newOption","msg","scope","colors","keys","temp","droppedLogger","droppedOption","convertOptions","legacyCodeDemo","legacyCodeGroup","_tokens","_index","isActive","legacyFlowchart","prepareConfigFile","legacy","configImport","enhance","getStatus","gfm","prepareMathjaxStyleFile","mathjaxInstance","generateMathjaxStyle","prepareRevealPluginFile","revealPlugins","packages","mdEnhancePlugin","locales","getLocales","chartEnable","echartsEnable","flowchartEnable","footnoteEnable","imgMarkEnable","tasklistEnable","mermaidEnable","presentationEnable","katexEnable","mathjaxEnable","vuePlaygroundEnable","shouldCheckLinks","katexOptions","createMathjaxInstance","useSassPalettePlugin","isAppInitialized","bundler","bundlerConfig","mergeViteConfig","warning","warn","addViteSsrNoExternal","addCustomElement","addViteOptimizeDepsExclude","addViteSsrExternal","addViteOptimizeDepsInclude","plugin","chainWebpack","attrs","align","imgLazyload","figure","imgMark","imgSize","sup","sub","footnote","mark","tasklist","katex","mathjax","include","stylize","presets","preset"],"mappings":"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"}