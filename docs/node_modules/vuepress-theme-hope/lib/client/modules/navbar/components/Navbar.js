import { computed, defineComponent, h, ref, resolveComponent } from "vue";
import { hasGlobalComponent } from "vuepress-shared/client";
import { useMobile, useThemeLocaleData } from "@theme-hope/composables/index";
import LanguageDropdown from "@theme-hope/modules/navbar/components/LanguageDropdown";
import NavbarBrand from "@theme-hope/modules/navbar/components/NavbarBrand";
import NavbarLinks from "@theme-hope/modules/navbar/components/NavbarLinks";
import NavScreen from "@theme-hope/modules/navbar/components/NavScreen";
import OutlookButton from "@theme-hope/modules/outlook/components/OutlookButton";
import ToggleNavbarButton from "@theme-hope/modules/navbar/components/ToggleNavbarButton";
import ToggleSidebarButton from "@theme-hope/modules/navbar/components/ToggleSidebarButton";
import RepoLink from "@theme-hope/modules/navbar/components/RepoLink";
import "../styles/navbar.scss";
export default defineComponent({
    name: "NavBar",
    emits: {
        toggleSidebar: () => true,
    },
    setup(_props, { emit, slots }) {
        const themeLocale = useThemeLocaleData();
        const isMobile = useMobile();
        const showScreen = ref(false);
        const autoHide = computed(() => {
            const { navbarAutoHide } = themeLocale.value;
            return (navbarAutoHide !== "none" &&
                (navbarAutoHide === "always" || isMobile.value));
        });
        const navbarLayout = computed(() => themeLocale.value.navbarLayout || {
            left: ["Brand"],
            center: ["Links"],
            right: ["Language", "Repo", "Outlook", "Search"],
        });
        return () => {
            const map = {
                Brand: h(NavbarBrand),
                Language: HAS_MULTIPLE_LANGUAGES ? h(LanguageDropdown) : null,
                Links: h(NavbarLinks),
                Repo: h(RepoLink),
                Outlook: h(OutlookButton),
                Search: hasGlobalComponent("Docsearch")
                    ? h(resolveComponent("Docsearch"))
                    : hasGlobalComponent("SearchBox")
                        ? h(resolveComponent("SearchBox"))
                        : hasGlobalComponent("SearchBox")
                            ? h(resolveComponent("SearchBox"))
                            : null,
            };
            return [
                h("header", {
                    class: [
                        "navbar",
                        {
                            "auto-hide": autoHide.value,
                            "hide-icon": !themeLocale.value.navbarIcon,
                        },
                    ],
                }, [
                    h("div", { class: "navbar-left" }, [
                        // @ts-ignore
                        h(ToggleSidebarButton, {
                            onToggle: () => {
                                if (showScreen.value)
                                    showScreen.value = false;
                                emit("toggleSidebar");
                            },
                        }),
                        slots["leftStart"]?.(),
                        ...navbarLayout.value.left.map((item) => map[item]),
                        slots["leftEnd"]?.(),
                    ]),
                    h("div", { class: "navbar-center" }, [
                        slots["centerStart"]?.(),
                        ...navbarLayout.value.center.map((item) => map[item]),
                        slots["centerEnd"]?.(),
                    ]),
                    h("div", { class: "navbar-right" }, [
                        slots["rightStart"]?.(),
                        ...navbarLayout.value.right.map((item) => map[item]),
                        slots["rightEnd"]?.(),
                        h(ToggleNavbarButton, {
                            active: showScreen.value,
                            onToggle: () => {
                                showScreen.value = !showScreen.value;
                            },
                        }),
                    ]),
                ]),
                h(NavScreen, {
                    show: showScreen.value,
                    onClose: () => {
                        showScreen.value = false;
                    },
                }, {
                    before: () => slots["screenTop"]?.(),
                    after: () => slots["screenBottom"]?.(),
                }),
            ];
        };
    },
});
//# sourceMappingURL=Navbar.js.map