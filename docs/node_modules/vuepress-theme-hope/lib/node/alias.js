import { fs, path } from "@vuepress/utils";
import { CLIENT_FOLDER } from "./utils.js";
const getDirAlias = (dir) => fs
    .readdirSync(path.resolve(CLIENT_FOLDER, dir))
    .filter((file) => 
// js files
file.endsWith(".js") ||
    // folder
    !file.includes("."))
    .map((file) => [
    `@theme-hope/${dir}/${file.replace(/\.js$/, "")}`,
    path.resolve(CLIENT_FOLDER, dir, file),
]);
const getEntryAlias = (entry) => fs.existsSync(path.resolve(CLIENT_FOLDER, entry, "index.js"))
    ? [
        `@theme-hope/${entry}/index`,
        path.resolve(CLIENT_FOLDER, entry, "index.js"),
    ]
    : null;
export const resolveAlias = (isDebug) => {
    // use alias to make all components replaceable
    const alias = Object.fromEntries([
        // define components
        ...getDirAlias("components"),
        // define composables and utils
        ...["composables", "utils"]
            .map(getEntryAlias)
            .filter((item) => item !== null),
        // define modules
        ...fs
            .readdirSync(path.resolve(CLIENT_FOLDER, "modules"))
            .map((folder) => `modules/${folder}`)
            .map((file) => [
            // define module components
            ...getDirAlias(`${file}/components`),
            // define module composables and utils
            ...["composables", "utils"]
                .map((folder) => `${file}/${folder}`)
                .map(getEntryAlias)
                .filter((item) => item !== null),
        ])
            .flat(),
    ]);
    if (isDebug)
        console.log("Theme alias config:", alias);
    return alias;
};
//# sourceMappingURL=alias.js.map