{"version":3,"file":"info.js","sourceRoot":"","sources":["../../../../src/node/plugins/blog/info.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAE,eAAe,EAAE,MAAM,sBAAsB,CAAC;AAYhE,MAAM,CAAC,MAAM,eAAe,GAAG,CAC7B,IAAyB,EACzB,IAA6B,EACvB,EAAE;IACR,MAAM,WAAW,GAAG,IAAI,CAAC,WAGK,CAAC;IAC/B,MAAM,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC;IAE5C,iBAAiB;IACjB,IAAI,QAAQ,IAAI,WAAW;QACzB,IAAI,kCAAwB,GAAG,WAAW,CAAC,MAAM,CAAC;IAEpD,eAAe;IACf,IAAI,MAAM,IAAI,WAAW,EAAE;QACzB,MAAM,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC;QAEnD,IAAI,IAAI,EAAE;YACR,IAAI,gCAAsB,GAAG,WAAW,CAAC,IAAI,CAAC;YAE9C,IAAI,yCAA+B,GAAG,eAAe,CAAC,IAAI,EAAE;gBAC1D,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,IAAI,EAAE,MAAM;aACb,CAAC,CAAC;SACJ;KACF;SAAM,IAAI,WAAW;QAAE,IAAI,gCAAsB,GAAG,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC;IAE3E,mBAAmB;IACnB,IAAI,UAAU,IAAI,WAAW;QAC3B,IAAI,oCAA0B,GAAG,WAAW,CAAC,QAAQ,CAAC;IAExD,cAAc;IACd,IAAI,KAAK,IAAI,WAAW;QAAE,IAAI,+BAAqB,GAAG,WAAW,CAAC,GAAG,CAAC;IAEtE,iBAAiB;IACjB,IAAI,QAAQ,IAAI,WAAW;QACzB,IAAI,kCAAwB,GAAG,WAAW,CAAC,MAAM,CAAC;IAEpD,gBAAgB;IAChB,IAAI,OAAO,IAAI,WAAW;QAAE,IAAI,iCAAuB,GAAG,WAAW,CAAC,KAAK,CAAC;IAE5E,qBAAqB;IACrB,IAAI,YAAY,IAAI,WAAW;QAC7B,IAAI,sCAA4B,GAAG,WAAW,CAAC,UAAU,CAAC;IAE5D,iCAAiC;IACjC,IAAI,WAAW,CAAC,OAAO;QAAE,IAAI,mCAAyB,GAAG,WAAW,CAAC,OAAO,CAAC;SACxE,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO;QAAE,IAAI,mCAAyB,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;SACzE,IAAI,WAAW,CAAC,WAAW;QAC9B,IAAI,mCAAyB,GAAG,WAAW,CAAC,WAAW,CAAC;AAC5D,CAAC,CAAC","sourcesContent":["import { getDate, timeTransformer } from \"vuepress-shared/node\";\n\nimport { ArticleInfoType } from \"../../../shared/index.js\";\n\nimport type { Page } from \"@vuepress/core\";\nimport type {\n  ThemePageData,\n  ThemeBlogHomePageFrontmatter,\n  ThemeProjectHomePageFrontmatter,\n  ThemeNormalPageFrontmatter,\n} from \"../../../shared/index.js\";\n\nexport const injectBasicInfo = (\n  page: Page<ThemePageData>,\n  info: Record<string, unknown>\n): void => {\n  const frontmatter = page.frontmatter as\n    | ThemeProjectHomePageFrontmatter\n    | ThemeBlogHomePageFrontmatter\n    | ThemeNormalPageFrontmatter;\n  const { createdTime } = page.data.git || {};\n\n  // resolve author\n  if (\"author\" in frontmatter)\n    info[ArticleInfoType.author] = frontmatter.author;\n\n  // resolve date\n  if (\"date\" in frontmatter) {\n    const date = getDate(page.frontmatter.date)?.value;\n\n    if (date) {\n      info[ArticleInfoType.date] = frontmatter.date;\n\n      info[ArticleInfoType.localizedDate] = timeTransformer(date, {\n        lang: page.lang,\n        type: \"date\",\n      });\n    }\n  } else if (createdTime) info[ArticleInfoType.date] = new Date(createdTime);\n\n  // resolve category\n  if (\"category\" in frontmatter)\n    info[ArticleInfoType.category] = frontmatter.category;\n\n  // resolve tag\n  if (\"tag\" in frontmatter) info[ArticleInfoType.tag] = frontmatter.tag;\n\n  // resolve sticky\n  if (\"sticky\" in frontmatter)\n    info[ArticleInfoType.sticky] = frontmatter.sticky;\n\n  // resolve image\n  if (\"cover\" in frontmatter) info[ArticleInfoType.cover] = frontmatter.cover;\n\n  // resolve isOriginal\n  if (\"isOriginal\" in frontmatter)\n    info[ArticleInfoType.isOriginal] = frontmatter.isOriginal;\n\n  // save page excerpt to routeMeta\n  if (frontmatter.excerpt) info[ArticleInfoType.excerpt] = frontmatter.excerpt;\n  else if (page.data.excerpt) info[ArticleInfoType.excerpt] = page.data.excerpt;\n  else if (frontmatter.description)\n    info[ArticleInfoType.excerpt] = frontmatter.description;\n};\n"]}