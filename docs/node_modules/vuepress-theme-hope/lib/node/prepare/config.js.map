{"version":3,"file":"config.js","sourceRoot":"","sources":["../../../src/node/prepare/config.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,aAAa,CAAC;AAK5C,MAAM,CAAC,MAAM,iBAAiB,GAAG,CAC/B,GAAQ,EACR,EAAE,UAAU,EAAE,aAAa,EAAE,WAAW,EAAe,EACtC,EAAE;IACnB,IAAI,YAAY,GAAG,EAAE,CAAC;IACtB,IAAI,OAAO,GAAG,EAAE,CAAC;IACjB,IAAI,KAAK,GAAG,EAAE,CAAC;IACf,IAAI,MAAM,GAAG,EAAE,CAAC;IAEhB,IAAI,UAAU,EAAE;QACd,YAAY,IAAI;;;4BAGQ,aAAa;wBACjB,aAAa;wBACb,aAAa;wBACb,aAAa;UAC3B,aAAa;CACtB,CAAC;QAEE,OAAO,IAAI;;CAEd,CAAC;QAEE,KAAK,IAAI;;CAEZ,CAAC;QAEE,MAAM,IAAI;;;;;CAKb,CAAC;KACC;IAED,IAAI,aAAa,EAAE;QACjB,YAAY,IAAI;;;CAGnB,CAAC;QACE,OAAO,IAAI;;;CAGd,CAAC;KACC;IAED,IAAI,WAAW,EAAE;QACf,YAAY,IAAI,sBAAsB,aAAa,sBAAsB,CAAC;QAC1E,MAAM,IAAI,UAAU,CAAC;KACtB;IAED,OAAO,GAAG,CAAC,SAAS,CAClB,sBAAsB,EACtB;;;;;;;sBAOkB,aAAa;wBACX,aAAa;;;;;;UAM3B,aAAa;;EAErB,YAAY;;;;;;;;;;;;;;;EAeZ,OAAO;SACN,KAAK,CAAC,IAAI,CAAC;SACX,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,OAAO,IAAI,EAAE,CAAC;SAC5B,IAAI,CAAC,IAAI,CAAC;;;;;EAKX,KAAK;SACJ,KAAK,CAAC,IAAI,CAAC;SACX,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,OAAO,IAAI,EAAE,CAAC;SAC5B,IAAI,CAAC,IAAI,CAAC;;;;;EAKX,MAAM;SACL,KAAK,CAAC,IAAI,CAAC;SACX,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,OAAO,IAAI,EAAE,CAAC;SAC5B,IAAI,CAAC,IAAI,CAAC;;IAET,CACD,CAAC;AACJ,CAAC,CAAC","sourcesContent":["import { CLIENT_FOLDER } from \"../utils.js\";\n\nimport type { App } from \"@vuepress/core\";\nimport type { ThemeStatus } from \"../config/status.js\";\n\nexport const prepareConfigFile = (\n  app: App,\n  { enableBlog, enableEncrypt, enableSlide }: ThemeStatus\n): Promise<string> => {\n  let configImport = \"\";\n  let enhance = \"\";\n  let setup = \"\";\n  let layout = \"\";\n\n  if (enableBlog) {\n    configImport += `\\\nimport BloggerInfo from \"@theme-hope/modules/blog/components/BloggerInfo\";\nimport { setupBlog } from \"@theme-hope/modules/blog/composables/index\";\nimport BlogCategory from \"${CLIENT_FOLDER}modules/blog/layouts/BlogCategory.js\";\nimport BlogHome from \"${CLIENT_FOLDER}modules/blog/layouts/BlogHome.js\";\nimport BlogType from \"${CLIENT_FOLDER}modules/blog/layouts/BlogType.js\";\nimport Timeline from \"${CLIENT_FOLDER}modules/blog/layouts/Timeline.js\";\nimport \"${CLIENT_FOLDER}modules/blog/styles/layout.scss\";\n`;\n\n    enhance += `\\\napp.component(\"BloggerInfo\", BloggerInfo);\n`;\n\n    setup += `\\\nsetupBlog();\n`;\n\n    layout += `\\\nBlogCategory,\nBlogHome,\nBlogType,\nTimeline,\n`;\n  }\n\n  if (enableEncrypt) {\n    configImport += `\\\nimport GlobalEncrypt from \"@theme-hope/modules/encrypt/components/GlobalEncrypt\";\nimport LocalEncrypt from \"@theme-hope/modules/encrypt/components/LocalEncrypt\";\n`;\n    enhance += `\\\napp.component(\"GlobalEncrypt\", GlobalEncrypt);\napp.component(\"LocalEncrypt\", LocalEncrypt);\n`;\n  }\n\n  if (enableSlide) {\n    configImport += `import Slide from \"${CLIENT_FOLDER}layouts/Slide.js\";\\n`;\n    layout += \"Slide,\\n\";\n  }\n\n  return app.writeTemp(\n    `theme-hope/config.js`,\n    `import { defineClientConfig } from \"@vuepress/client\";\n\nimport CommonWrapper from \"@theme-hope/components/CommonWrapper\";\nimport HomePage from \"@theme-hope/components/HomePage\";\nimport NormalPage from \"@theme-hope/components/NormalPage\";\nimport Navbar from \"@theme-hope/modules/navbar/components/Navbar\";\nimport Sidebar from \"@theme-hope/modules/sidebar/components/Sidebar\";\nimport Layout from \"${CLIENT_FOLDER}layouts/Layout.js\";\nimport NotFound from \"${CLIENT_FOLDER}layouts/NotFound.js\";\n\nimport { useScrollPromise } from \"@theme-hope/composables/index\";\nimport { injectDarkMode, setupDarkMode } from \"@theme-hope/modules/outlook/composables/index\";\nimport { setupSidebarItems } from \"@theme-hope/modules/sidebar/composables/index\";\n\nimport \"${CLIENT_FOLDER}styles/index.scss\";\n\n${configImport}\n\nexport default defineClientConfig({\n  enhance: ({ app, router }) => {\n    const { scrollBehavior } = router.options;\n\n    router.options.scrollBehavior = async (...args) => {\n      await useScrollPromise().wait();\n\n      return scrollBehavior(...args);\n    };\n\n    // inject global properties\n    injectDarkMode(app);\n\n${enhance\n  .split(\"\\n\")\n  .map((item) => `    ${item}`)\n  .join(\"\\n\")}\n  },\n  setup: () => {\n    setupDarkMode();\n    setupSidebarItems();\n${setup\n  .split(\"\\n\")\n  .map((item) => `    ${item}`)\n  .join(\"\\n\")}\n  },\n  layouts: {\n    Layout,\n    NotFound,\n${layout\n  .split(\"\\n\")\n  .map((item) => `    ${item}`)\n  .join(\"\\n\")}\n  }\n});`\n  );\n};\n"]}